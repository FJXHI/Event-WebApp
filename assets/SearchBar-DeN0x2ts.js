import{d as V,r as c,c as m,a as i,b as a,t as n,x as u,F as f,E as v,u as _,y as g,o,J as y,L as Z,w as S,S as b,_ as N,g as x,U as ee,V as te}from"./index-BR-yqsSR.js";import{u as ae}from"./useEventData-CQLj69iX.js";import{T}from"./TagLabel-qznEqKvQ.js";const se={class:"overlay"},le={class:"filter-modal"},oe={class:"filter-modal-header"},re={class:"filter-modal-body"},ne={class:"filter-group"},ie={class:"filter-button-group"},ce=["onClick"],ue={class:"filter-group"},de={class:"filter-button-group"},pe={class:"filter-group"},fe={class:"filter-button-group"},ve={class:"filter-group"},ge={class:"filter-button-group"},ye={class:"filter-group"},he={class:"filter-button-group"},me={class:"filter-group"},_e={class:"filter-button-group"},Se={class:"filter-group"},Te={class:"filter-button-group"},be={class:"filter-modal-footer"},Fe=V({__name:"FilterMenu",props:{initialStages:{type:Array,default:()=>[]},initialStageTypes:{type:Array,default:()=>[]},initialStageFeatures:{type:Array,default:()=>[]},initialCategories:{type:Array,default:()=>[]},initialActTypes:{type:Array,default:()=>[]},initialPerforTypes:{type:Array,default:()=>[]},initialPerformanceTags:{type:Array,default:()=>[]},initialSearchQuery:{type:String,default:""},showStageFilter:{type:Boolean,default:!1},showStageTypeFilter:{type:Boolean,default:!1},showStageFeatureFilter:{type:Boolean,default:!1},showCategoryFilter:{type:Boolean,default:!1},showActTypeFilter:{type:Boolean,default:!1},showPerforTypeFilter:{type:Boolean,default:!1},showPerformanceTagFilter:{type:Boolean,default:!1}},emits:["apply","close"],setup(L,{emit:I}){const F=I,{stages:d,acts:k,performances:C}=ae(),l=L,h=c([...l.initialStages.map(Number)]),$=c([...l.initialStageTypes]),w=c([...l.initialStageFeatures]),A=c([...l.initialCategories]),P=c([...l.initialActTypes]),B=c([...l.initialPerforTypes]),E=c([...l.initialPerformanceTags]),Q=c(l.initialSearchQuery),z=m(()=>{const t=new Set;return d.value.forEach(s=>{s.type&&t.add(s.type)}),Array.from(t)}),D=m(()=>{const t=new Set;return d.value.forEach(s=>{var e;(e=s.features)==null||e.forEach(r=>t.add(r))}),Array.from(t)}),M=m(()=>{const t=new Set;return k.value.forEach(s=>{var e;(e=s.tags)==null||e.forEach(r=>{r.visible&&t.add(r.name)})}),Array.from(t)}),U=m(()=>{const t=new Set;return k.value.forEach(s=>{var e;(e=s["act-type"])==null||e.forEach(r=>{t.add(r)})}),Array.from(t)}),J=m(()=>{const t=new Set;return C.value.forEach(s=>{s.type&&t.add(s.type)}),Array.from(t)}),O=m(()=>{const t=new Set;return C.value.forEach(s=>{var e;(e=s.tags)==null||e.forEach(r=>t.add(r))}),Array.from(t)}),p=(t,s)=>{const e=t.indexOf(s);e>=0?t.splice(e,1):t.push(s)},j=t=>p(h.value,t),q=t=>p($.value,t),G=t=>p(w.value,t),H=t=>p(A.value,t),K=t=>p(P.value,t),R=t=>p(B.value,t),W=t=>p(E.value,t),X=()=>{h.value=[],$.value=[],w.value=[],A.value=[],P.value=[],B.value=[],E.value=[],Q.value=""},Y=()=>{F("apply",{stages:h.value.map(String),stageTypes:$.value,stageFeatures:w.value,categories:A.value,actTypes:P.value,perforTypes:B.value,performanceTags:E.value,searchQuery:Q.value.trim()}),F("close")};return(t,s)=>(o(),i("div",se,[a("div",le,[a("div",oe,[a("h2",null,n(t.$t("filter")),1),a("button",{onClick:s[0]||(s[0]=e=>t.$emit("close")),class:"filter-close-btn"},"×")]),a("div",re,[a("button",{onClick:X,class:"filter-reset-btn"}," ↻ "+n(t.$t("reset-filter")),1),u(a("div",ne,[a("h3",null,n(t.$t("stages")),1),a("div",ie,[(o(!0),i(f,null,v(_(d),e=>(o(),i("button",{key:e.id,onClick:r=>j(e.id),class:y({selected:h.value.includes(e.id)})},[s[1]||(s[1]=a("span",null,"📍",-1)),Z(" "+n(e.name),1)],10,ce))),128))])],512),[[g,l.showStageFilter]]),u(a("div",ue,[a("h3",null,n(t.$t("Location-Types")),1),a("div",de,[(o(!0),i(f,null,v(z.value,e=>(o(),S(T,{key:e,name:_(b)(e),tag:"button",onClick:r=>q(e),class:y({selected:$.value.includes(e)})},null,8,["name","onClick","class"]))),128))])],512),[[g,l.showStageTypeFilter]]),u(a("div",pe,[a("h3",null,n(t.$t("Location-Features")),1),a("div",fe,[(o(!0),i(f,null,v(D.value,e=>(o(),S(T,{key:e,name:_(b)(e),tag:"button",onClick:r=>G(e),class:y({selected:w.value.includes(e)})},null,8,["name","onClick","class"]))),128))])],512),[[g,l.showStageFeatureFilter]]),u(a("div",ve,[a("h3",null,n(t.$t("kategorien")),1),a("div",ge,[(o(!0),i(f,null,v(M.value,e=>(o(),S(T,{key:e,name:_(b)(e),tag:"button",onClick:r=>H(e),class:y({selected:A.value.includes(e)})},null,8,["name","onClick","class"]))),128))])],512),[[g,l.showCategoryFilter]]),u(a("div",ye,[a("h3",null,n(t.$t("Act Types")),1),a("div",he,[(o(!0),i(f,null,v(U.value,e=>(o(),S(T,{key:e,name:_(b)(e),tag:"button",onClick:r=>K(e),class:y({selected:P.value.includes(e)})},null,8,["name","onClick","class"]))),128))])],512),[[g,l.showActTypeFilter]]),u(a("div",me,[a("h3",null,n(t.$t("Performance-Types")),1),a("div",_e,[(o(!0),i(f,null,v(J.value,e=>(o(),S(T,{key:e,name:_(b)(e),tag:"button",onClick:r=>R(e),class:y({selected:B.value.includes(e)})},null,8,["name","onClick","class"]))),128))])],512),[[g,l.showPerforTypeFilter]]),u(a("div",Se,[a("h3",null,n(t.$t("Performance-Tags")),1),a("div",Te,[(o(!0),i(f,null,v(O.value,e=>(o(),S(T,{key:e,name:e,tag:"button",onClick:r=>W(e),class:y({selected:E.value.includes(e)})},null,8,["name","onClick","class"]))),128))])],512),[[g,l.showPerformanceTagFilter]])]),a("div",be,[a("button",{onClick:Y,class:"filter-apply-btn"},n(t.$t("apply-filter")),1)])])]))}}),Ie=N(Fe,[["__scopeId","data-v-32eeefe3"]]),ke={class:"search-bar"},Ce={class:"search-inputline"},$e={class:"search-icon"},we=["placeholder"],Ae=V({__name:"SearchBar",emits:["apply"],setup(L,{emit:I}){const F=I,d=c(""),k=()=>{F("apply",d.value)};return(C,l)=>(o(),i("div",ke,[a("div",Ce,[a("div",$e,[x(ee,{class:"icon-size"})]),u(a("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=h=>d.value=h),onInput:k,placeholder:C.$t("search-placeholder")},null,40,we),[[te,d.value]])])]))}}),Le=N(Ae,[["__scopeId","data-v-550d5a5b"]]);export{Ie as F,Le as S};
