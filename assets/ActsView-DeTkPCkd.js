import{d as L,c as n,q as A,r as f,a as c,x,w as g,z as E,b as r,y as M,g as y,t as h,F as w,C as S,u as j,D as z,H,o as l}from"./index-CbHRe8L7.js";import{u as $}from"./useEventData-D5TbTuT6.js";import{F as J,T as Q}from"./TagLabel-CrMxmDSo.js";import{S as R,F as G}from"./SearchBar-DEjca1zq.js";import{N as F}from"./NoEntries-Eg1vgcJ-.js";const K={class:"scroll-head full-height"},P={class:"btn-header"},U={class:"scroll-y-area"},W={key:0,class:"list-item-ul"},X={class:"list-item-info pad"},Y={class:"list-item-name"},Z={class:"list-item-tags"},ee=L({__name:"ActList",props:{filterID:{}},setup(C){const v=A(),_=n(()=>v.query.fav==="true"),I=n(()=>v.query.search??"false"),o=f(""),m=e=>{o.value=e.toLowerCase().trim()},D=f(!1),{acts:d}=$(),b=C,s=f({categories:[],actTypes:[],actIDs:[]}),B=e=>{s.value.categories=e.categories||[],s.value.actTypes=e.actTypes||[],s.value.actIDs=e.actIDs||[]},N=n(()=>{if(!d.value||d.value.length===0)return[];let e=d.value;if(b.filterID&&b.filterID.length>0&&(e=e.filter(t=>b.filterID.includes(t.id))),s.value.actIDs&&s.value.actIDs.length>0&&(e=e.filter(t=>s.value.actIDs.includes(t.id))),s.value.categories&&s.value.categories.length>0&&(e=e.filter(t=>{var i;return(i=t.tags)==null?void 0:i.some(a=>s.value.categories.includes(a.name))})),s.value.actTypes&&s.value.actTypes.length>0&&(e=e.filter(t=>(t["act-type"]||[]).some(a=>s.value.actTypes.includes(a)))),o.value&&(!s.value.actIDs||s.value.actIDs.length===0)){const t=o.value.toLowerCase();e=e.filter(i=>{var a,u;return((a=i.name)==null?void 0:a.toLowerCase().includes(t))||((u=i.description)==null?void 0:u.toLowerCase().includes(t))})}return e}),p=f("name"),q=()=>{p.value=p.value==="name"?"id":"name"},O=n(()=>p.value==="name"?"id":"name"),T=n(()=>[...N.value].sort((e,t)=>p.value==="name"?e.name.localeCompare(t.name,"de",{sensitivity:"base"}):e.id-t.id));return(e,t)=>{const i=H("router-link");return l(),c("div",K,[x(y(R,{onApply:m},null,512),[[M,I.value==="true"]]),D.value?(l(),g(G,{key:0,showCategoryFilter:!0,showActTypeFilter:!0,"initial-categories":s.value.categories,"initial-act-types":s.value.actTypes,onApply:B,onClose:t[0]||(t[0]=a=>D.value=!1)},null,8,["initial-categories","initial-act-types"])):E("",!0),r("div",P,[r("button",{class:"btn half left",onClick:q},h(e.$t("sort-by"))+": "+h(e.$t(O.value)),1),r("button",{onClick:t[1]||(t[1]=a=>D.value=!0),class:"btn right"},h(e.$t("open-filter")),1)]),r("div",U,[T.value.length>0?(l(),c("ul",W,[(l(!0),c(w,null,S(T.value,a=>{var u;return l(),c("li",{key:a.id,class:"list-item-obj"},[y(i,{to:"/act/"+((u=a["id-name"])!=null&&u.trim()?a["id-name"]:a.id),class:"list-item-link"},{default:z(()=>[r("div",X,[r("strong",Y,h(a.name),1),r("span",Z,[(l(!0),c(w,null,S(a.tags.filter(k=>k.visible),(k,V)=>(l(),g(Q,{key:V,name:k.name,class:"tag-label-item TagLabel"},null,8,["name"]))),128))])])]),_:2},1032,["to"]),y(J,{itemId:String(a.id),itemType:"act",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])):_.value&&j(d).length>0?(l(),g(F,{key:1,type:"favorites"})):(l(),g(F,{key:2,type:"acts"}))])])}}}),te={class:"list-view full-height"},re=L({__name:"ActsView",setup(C){$();const v=A(),_=n(()=>v.query.fav==="true"),I=n(()=>{const o=localStorage.getItem("act");return o?JSON.parse(o).map(m=>parseInt(m)):[]});return(o,m)=>(l(),c("div",te,[y(ee,{filterID:_.value?I.value:void 0,class:"full-height"},null,8,["filterID"])]))}});export{re as default};
