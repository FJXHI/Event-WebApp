import{d as C,c as m,q as D,r as g,a as o,b as i,w as L,y as I,z as T,x as $,g as d,t as p,F as B,C as N,D as V,H as q,o as a,u as x}from"./index-CZaOsU5D.js";import{u as F}from"./useEventData-CQnlCbtv.js";import{F as A,T as E}from"./TagLabel-mnQKG_r5.js";import{S as M,F as O}from"./SearchBar-COuGtgur.js";const j={class:"scroll-head full-height"},z={class:"app-head"},H={class:"btn-header"},J={class:"scroll-y-area"},Q={key:0,class:"list-item-ul"},R={class:"list-item-info pad"},G={class:"list-item-name"},K={class:"list-item-tags"},P={key:1},U=C({__name:"LocationList",props:{filterID:{}},setup(k){const v=D(),f=m(()=>v.query.search??"false"),n=g(""),h=e=>{n.value=e.toLowerCase().trim()},l=g(!1),{stages:r}=F(),_=k,u=g({stageTypes:[]}),b=e=>{u.value.stageTypes=e.stageTypes||[]},w=m(()=>{if(!r.value||r.value.length===0)return[];let e=r.value;return _.filterID&&_.filterID.length>0&&(e=e.filter(t=>_.filterID.includes(t.id))),u.value.stageTypes.length>0&&(e=e.filter(t=>t.type&&u.value.stageTypes.includes(t.type))),n.value&&(e=e.filter(t=>{var c,S;const y=((c=t.name)==null?void 0:c.toLowerCase())||"",s=((S=t.description)==null?void 0:S.toLowerCase())||"";return y.includes(n.value)||s.includes(n.value)})),e});return(e,t)=>{const y=q("router-link");return a(),o("div",j,[i("div",z,[L(d(M,{onApply:h},null,512),[[$,f.value==="true"]]),l.value?(a(),I(O,{key:0,showStageTypeFilter:!0,"initial-stage-types":u.value.stageTypes,onApply:b,onClose:t[0]||(t[0]=s=>l.value=!1)},null,8,["initial-stage-types"])):T("",!0)]),i("div",H,[i("button",{onClick:t[1]||(t[1]=s=>l.value=!0),class:"btn full"},p(e.$t("open-filter")),1)]),i("div",J,[w.value.length>0?(a(),o("ul",Q,[(a(!0),o(B,null,N(w.value,s=>{var c;return a(),o("li",{key:s.id,class:"list-item-obj"},[d(y,{to:"/location/"+((c=s["id-name"])!=null&&c.trim()?s["id-name"]:s.id),class:"list-item-link"},{default:V(()=>[i("div",R,[i("strong",G,p(s.name),1),i("span",K,[s.type?(a(),I(E,{key:0,name:s.type,class:"tag-label-item TagLabel"},null,8,["name"])):T("",!0)])])]),_:2},1032,["to"]),d(A,{itemId:String(s.id),itemType:"stage",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])):(a(),o("p",P,p(e.$t("no-locations")),1))])])}}}),W={class:"list-view full-height"},X={key:0,class:"full-height"},Y={key:1},ae=C({__name:"LocationsView",setup(k){const{stages:v}=F(),f=D(),n=m(()=>f.query.fav==="true"),h=m(()=>{const l=localStorage.getItem("stage");return l?JSON.parse(l).map(r=>parseInt(r)):[]});return(l,r)=>(a(),o("div",W,[x(v).length>0?(a(),o("div",X,[d(U,{filterID:n.value?h.value:void 0,class:"full-height"},null,8,["filterID"])])):(a(),o("p",Y,p(l.$t("no-locations")),1))]))}});export{ae as default};
