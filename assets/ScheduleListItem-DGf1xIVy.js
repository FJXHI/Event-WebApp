import{d as M,c as k,f as g,a as n,F as y,q as p,b as c,t as u,B as D,g as I,E as j,v as q,G as K,u as C,H as P,m as Q,o,_ as G}from"./index-C5mK4R5I.js";import{u as H}from"./useEventData-Ck0WbNMU.js";import{F as O}from"./FavBtn-AqkSGlXI.js";import{T as R}from"./tagLabel-BSGkP6OK.js";const U={class:"date-navigation group-head"},z=["onClick"],J={key:1},W=["id"],X=["onClick"],Y={key:3},Z={class:"group-head"},x={class:"date-nav-container"},tt=["onClick"],et=["id"],st=["onClick"],at={class:"group-head head-time pad"},nt={class:"list-item-info pad"},ot={class:"list-item-name"},it={key:0},lt={key:0},rt={key:1},ct={key:2},ut={class:"list-item-tags"},dt=M({__name:"ScheduleListItem",props:{filters:{}},setup(N){const S=Q(),m=k(()=>Object.keys(L.value).sort());function v(t){S.replace({hash:`#${t}`});const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}const{performances:B,acts:f,stages:T}=H(),$=N,V=t=>{const e=T.value.find(r=>r.id===t);return e?e.name:"Stage not found"},w=t=>K(t,f),E=k(()=>{const t=$.filters;return B.value.filter(e=>{var r;if(t.stages.length&&!t.stages.includes(String(e.stageID))||t.types.length&&!t.types.includes(e.type)||t.performanceTags.length&&(!e.tags||!e.tags.some(a=>t.performanceTags.includes(a)))||t.categories.length&&!e.actsIDArr.map(i=>f.value.find(l=>l.id===i)).filter(Boolean).flatMap(i=>i.tags.filter(l=>l.visible).map(l=>l.name)).some(i=>t.categories.includes(i))||t.actIDs.length&&!t.actIDs.some(a=>e.actsIDArr.includes(Number(a)))||t.performanceIDs.length&&!t.performanceIDs.some(a=>e.id===Number(a)))return!1;if(t.searchQuery){const a=t.searchQuery.toLowerCase(),_=(e.name||"").toLowerCase().includes(a)||(e.description||"").toLowerCase().includes(a),i=e.actsIDArr.some(s=>{var b,A;const d=f.value.find(F=>F.id===s);return((b=d==null?void 0:d.name)==null?void 0:b.toLowerCase().includes(a))||((A=d==null?void 0:d.description)==null?void 0:A.toLowerCase().includes(a))}),l=T.value.find(s=>s.id===e.stageID),h=(r=l==null?void 0:l.name)==null?void 0:r.toLowerCase().includes(a);if(!_&&!i&&!h)return!1}return!0}).sort((e,r)=>new Date(e.start_time).getTime()-new Date(r.start_time).getTime())}),L=k(()=>{const t={};for(const e of E.value){const r=g(e.start_time,"Date Long"),a=g(e.start_time,"Time");t[r]||(t[r]={}),t[r][a]||(t[r][a]=[]),t[r][a].push(e)}return t});return(t,e)=>{const r=P("router-link");return o(),n("div",null,[(o(!0),n(y,null,p(L.value,(a,_,i)=>(o(),n("div",{key:_,class:"date-group"},[c("div",U,[m.value[i-1]?(o(),n("div",{key:0,class:"nav-arrow nav-left",onClick:l=>v(m.value[i-1])}," < ",8,z)):(o(),n("div",J)),c("h2",{class:"head-date",id:_},u(_),9,W),m.value[i+1]?(o(),n("div",{key:2,class:"nav-arrow nav-right",onClick:l=>v(m.value[i+1])}," > ",8,X)):(o(),n("div",Y))]),c("div",Z,[c("div",x,[m.value[i-1]?(o(),n("button",{key:0,onClick:l=>v(m.value[i-1]),class:"nav-arrow nav-left"}," < ",8,tt)):D("",!0),c("h2",{class:"head-date",id:_},u(_),9,et),m.value[i+1]?(o(),n("button",{key:1,onClick:l=>v(m.value[i+1]),class:"nav-arrow nav-right"}," > ",8,st)):D("",!0)])]),(o(!0),n(y,null,p(a,(l,h)=>(o(),n("div",{key:h,class:"time-group"},[c("h3",at,u(h),1),c("ul",null,[(o(!0),n(y,null,p(l,s=>{var d;return o(),n("li",{key:s.id,class:"list-item-obj"},[I(r,{to:"/event/"+(((d=s["id-name"])==null?void 0:d.trim())||s.id),class:"list-item-link"},{default:j(()=>[c("div",nt,[c("strong",ot,[s.name?(o(),n("div",it,[q(u(s.name)+" ",1),s.actsIDArr.length?(o(),n("span",lt," ("+u(w(s.actsIDArr))+") ",1)):D("",!0)])):s.actsIDArr.length?(o(),n("div",rt,u(w(s.actsIDArr)),1)):(o(),n("div",ct,u(t.$t("Unknown")),1))]),c("span",ut,[c("span",null,u(V(s.stageID)),1),c("span",null,u(C(g)(s.start_time,"Date Long"))+", "+u(C(g)(s.start_time,"Time"))+" â€“ "+u(C(g)(s.end_time,"Time")),1),c("span",null,[I(R,{name:s.type,class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),I(O,{itemId:s.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])}}}),ht=G(dt,[["__scopeId","data-v-b4ecd26e"]]);export{ht as S};
