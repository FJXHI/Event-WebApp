import{d as b,c as o,q as C,r as F,a as u,b as i,x as $,w as I,z as q,y as x,g as m,t as k,F as D,E as T,G as E,K as O,o as a}from"./index-D9Re5mF_.js";import{u as V}from"./useEventData-mVwqMhg8.js";import{T as A,F as J}from"./TagLabel-EjRzqVNS.js";import{S as M,F as j}from"./SearchBar-DQTfBN_P.js";import{N as z}from"./NoEntries-qmPgtxmh.js";const G={class:"scroll-head full-height"},K={class:"app-head"},Q={class:"btn-header"},R={class:"scroll-y-area"},H={key:0,class:"list-item-ul"},P={class:"list-item-info pad"},U={class:"list-item-name"},W={class:"list-item-tags"},X=b({__name:"LocationList",props:{filterID:{}},setup(S){const d=C(),g=o(()=>d.query.fav==="true"),h=o(()=>d.query.search??"false"),l=F(""),f=o(()=>{const e=localStorage.getItem("stage");return e?JSON.parse(e).map(t=>parseInt(t)):[]}),L=o(()=>f.value.length>0),N=e=>{l.value=e.toLowerCase().trim()},_=F(!1),{stages:y}=V(),c=S,r=F({stageTypes:[],stageFeatures:[]}),B=e=>{r.value.stageTypes=e.stageTypes||[],r.value.stageFeatures=e.stageFeatures||[]},w=o(()=>{if(!y.value||y.value.length===0)return[];if(c.filterID&&c.filterID.length===0)return[];let e=y.value;return c.filterID&&c.filterID.length>0&&(e=e.filter(t=>c.filterID.includes(t.id))),r.value.stageTypes.length>0&&(e=e.filter(t=>t.type&&r.value.stageTypes.includes(t.type))),r.value.stageFeatures.length>0&&(e=e.filter(t=>{var n;return(n=t.features)==null?void 0:n.some(s=>r.value.stageFeatures.includes(s))})),l.value&&(e=e.filter(t=>{var p,v;const n=((p=t.name)==null?void 0:p.toLowerCase())||"",s=((v=t.description)==null?void 0:v.toLowerCase())||"";return n.includes(l.value)||s.includes(l.value)})),e});return(e,t)=>{const n=O("router-link");return a(),u("div",G,[i("div",K,[$(m(M,{onApply:N},null,512),[[x,h.value==="true"]]),_.value?(a(),I(j,{key:0,showStageTypeFilter:!0,showStageFeatureFilter:!0,"initial-stage-types":r.value.stageTypes,"initial-stage-features":r.value.stageFeatures,onApply:B,onClose:t[0]||(t[0]=s=>_.value=!1)},null,8,["initial-stage-types","initial-stage-features"])):q("",!0)]),i("div",Q,[i("button",{onClick:t[1]||(t[1]=s=>_.value=!0),class:"btn full"},k(e.$t("open-filter")),1)]),i("div",R,[w.value.length>0?(a(),u("ul",H,[(a(!0),u(D,null,T(w.value,s=>{var p;return a(),u("li",{key:s.id,class:"list-item-obj"},[m(n,{to:"/location/"+((p=s["id-name"])!=null&&p.trim()?s["id-name"]:s.id),class:"list-item-link"},{default:E(()=>[i("div",P,[i("strong",U,k(s.name),1),i("span",W,[(a(!0),u(D,null,T(s.features,v=>(a(),I(A,{name:v,class:"tag-label-item TagLabel"},null,8,["name"]))),256))])])]),_:2},1032,["to"]),m(J,{itemId:String(s.id),itemType:"stage",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])):(a(),I(z,{key:1,type:g.value&&!L.value?"favorites":"locations"},null,8,["type"]))])])}}}),Y={class:"list-view full-height"},le=b({__name:"LocationsView",setup(S){const d=C(),g=o(()=>d.query.fav==="true"),h=o(()=>{const l=localStorage.getItem("stage");return l?JSON.parse(l).map(f=>parseInt(f)):[]});return(l,f)=>(a(),u("div",Y,[m(X,{filterID:g.value?h.value:void 0,class:"full-height"},null,8,["filterID"])]))}});export{le as default};
