import{d as $,c as y,f as h,a as o,b as r,F as T,C as D,t as d,g as I,D as E,H as j,p as z,o as i,J as K,z as P,G as Q,u as f,L as q,_ as x}from"./index-CPXJwdLf.js";import{u as G}from"./useEventData-CGAfq2kc.js";import{F as H,T as J}from"./TagLabel-B8pI4c43.js";const O={class:"scroll-head full-height"},R={class:"scroll-y-area"},U={class:"group-head"},W={class:"date-nav-container"},X=["onClick"],Y={key:1,class:"nav-arrow nav-left"},Z=["id"],tt=["onClick"],et={key:3,class:"nav-arrow nav-right"},st={class:"group-head head-time pad"},at={class:"list-item-ul"},nt={class:"list-item-info pad"},ot={class:"list-item-name"},it={key:0},lt={key:0},ct={key:1},rt={key:2},ut={class:"list-item-tags"},dt=$({__name:"ScheduleListItem",props:{filters:{}},setup(b){const N=z(),_=y(()=>Object.keys(C.value).sort());function k(t){N.replace({hash:`#${t}`});const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}const{performances:S,acts:v,stages:p}=G(),B=b,M=t=>{const e=p.value.find(l=>l.id===t);return e?e.name:"Stage not found"},w=t=>Q(t,v),V=y(()=>{const t=B.filters;return S.value.filter(e=>{var l;if(t.stages.length&&!t.stages.includes(String(e.stageID)))return!1;if(t.stageTypes.length){const s=p.value.find(u=>u.id===e.stageID);if(!s||!t.stageTypes.includes(s.type))return!1}if(t.perforTypes.length&&!t.perforTypes.includes(e.type)||t.performanceTags.length&&(!e.tags||!e.tags.some(s=>t.performanceTags.includes(s)))||t.categories.length&&!e.actsIDArr.map(n=>v.value.find(c=>c.id===n)).filter(Boolean).flatMap(n=>n.tags.map(c=>c.name)).some(n=>t.categories.includes(n))||t.actTypes.length&&!e.actsIDArr.some(u=>{const n=v.value.find(g=>g.id===u);return((n==null?void 0:n["act-type"])||[]).some(g=>t.actTypes.includes(g))})||t.actIDs.length&&!t.actIDs.some(s=>e.actsIDArr.includes(Number(s)))||t.performanceIDs.length&&!t.performanceIDs.some(s=>e.id===Number(s)))return!1;if(t.searchQuery){const s=t.searchQuery.toLowerCase(),u=(e.name||"").toLowerCase().includes(s)||(e.description||"").toLowerCase().includes(s),n=e.actsIDArr.some(a=>{var L,A;const m=v.value.find(F=>F.id===a);return((L=m==null?void 0:m.name)==null?void 0:L.toLowerCase().includes(s))||((A=m==null?void 0:m.description)==null?void 0:A.toLowerCase().includes(s))}),c=p.value.find(a=>a.id===e.stageID),g=(l=c==null?void 0:c.name)==null?void 0:l.toLowerCase().includes(s);if(!u&&!n&&!g)return!1}return!0}).sort((e,l)=>new Date(e.start_time).getTime()-new Date(l.start_time).getTime())}),C=y(()=>{const t={};for(const e of V.value){const l=h(e.start_time,"Date Long"),s=h(e.start_time,"Time");t[l]||(t[l]={}),t[l][s]||(t[l][s]=[]),t[l][s].push(e)}return t});return(t,e)=>{const l=j("router-link");return i(),o("div",O,[r("div",R,[(i(!0),o(T,null,D(C.value,(s,u,n)=>(i(),o("div",{key:u,class:"date-group"},[r("div",U,[r("div",W,[_.value[n-1]?(i(),o("button",{key:0,class:"nav-arrow nav-left",onClick:c=>k(_.value[n-1])}," < ",8,X)):(i(),o("div",Y)),r("h2",{class:"head-date",id:u},d(u),9,Z),_.value[n+1]?(i(),o("button",{key:2,class:"nav-arrow nav-right",onClick:c=>k(_.value[n+1])}," > ",8,tt)):(i(),o("div",et))])]),(i(!0),o(T,null,D(s,(c,g)=>(i(),o("div",{key:g,class:"time-group"},[r("h3",st,d(g),1),r("ul",at,[(i(!0),o(T,null,D(c,a=>{var m;return i(),o("li",{key:a.id,class:"list-item-obj"},[I(l,{to:"/event/"+(((m=a["id-name"])==null?void 0:m.trim())||a.id),class:"list-item-link"},{default:E(()=>[r("div",nt,[r("strong",ot,[a.name?(i(),o("div",it,[K(d(a.name)+" ",1),a.actsIDArr.length?(i(),o("span",lt," ("+d(w(a.actsIDArr))+") ",1)):P("",!0)])):a.actsIDArr.length?(i(),o("div",ct,d(w(a.actsIDArr)),1)):(i(),o("div",rt,d(t.$t("Unknown")),1))]),r("span",ut,[r("span",null,d(M(a.stageID)),1),r("span",null,d(f(h)(a.start_time,"Date Long"))+", "+d(f(h)(a.start_time,"Time"))+" â€“ "+d(f(h)(a.end_time,"Time")),1),r("span",null,[I(J,{name:f(q)(a.type),class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),I(H,{itemId:a.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])])}}}),_t=x(dt,[["__scopeId","data-v-40478963"]]);export{_t as S};
