import{d as x,c as L,f as _,a as o,F as f,q as p,b as u,t as l,g as v,E as F,v as V,B as E,G as M,u as D,H as q,o as r,_ as K}from"./index-CewyPrbH.js";import{u as P}from"./useEventData-qa49cUEO.js";import{F as Q}from"./FavBtn-DV989jc-.js";import{T as j}from"./tagLabel-C5Bkk69s.js";const G={class:"group-head head-date"},H={class:"group-head head-time pad"},U={class:"list-item-info pad"},$={class:"list-item-name"},z={key:0},J={key:0},O={key:1},R={key:2},W={class:"list-item-tags"},X=x({__name:"ScheduleListItem",props:{filters:{}},setup(A){const{performances:w,acts:h,stages:y}=P(),C=A,b=t=>{const e=y.value.find(n=>n.id===t);return e?e.name:"Stage not found"},I=t=>M(t,h),N=L(()=>{const t=C.filters;return w.value.filter(e=>{var n;if(t.stages.length&&!t.stages.includes(String(e.stageID))||t.types.length&&!t.types.includes(e.type)||t.performanceTags.length&&(!e.tags||!e.tags.some(s=>t.performanceTags.includes(s)))||t.categories.length&&!e.actsIDArr.map(c=>h.value.find(i=>i.id===c)).filter(Boolean).flatMap(c=>c.tags.filter(i=>i.visible).map(i=>i.name)).some(c=>t.categories.includes(c))||t.actIDs.length&&!t.actIDs.some(s=>e.actsIDArr.includes(Number(s)))||t.performanceIDs.length&&!t.performanceIDs.some(s=>e.id===Number(s)))return!1;if(t.searchQuery){const s=t.searchQuery.toLowerCase(),g=(e.name||"").toLowerCase().includes(s)||(e.description||"").toLowerCase().includes(s),c=e.actsIDArr.some(d=>{var T,k;const m=h.value.find(B=>B.id===d);return((T=m==null?void 0:m.name)==null?void 0:T.toLowerCase().includes(s))||((k=m==null?void 0:m.description)==null?void 0:k.toLowerCase().includes(s))}),i=y.value.find(d=>d.id===e.stageID),a=(n=i==null?void 0:i.name)==null?void 0:n.toLowerCase().includes(s);if(!g&&!c&&!a)return!1}return!0}).sort((e,n)=>new Date(e.start_time).getTime()-new Date(n.start_time).getTime())}),S=L(()=>{const t={};for(const e of N.value){const n=_(e.start_time,"Date Long"),s=_(e.start_time,"Time");t[n]||(t[n]={}),t[n][s]||(t[n][s]=[]),t[n][s].push(e)}return t});return(t,e)=>{const n=q("router-link");return r(),o("div",null,[(r(!0),o(f,null,p(S.value,(s,g)=>(r(),o("div",{key:g,class:"date-group"},[u("h2",G,l(g),1),(r(!0),o(f,null,p(s,(c,i)=>(r(),o("div",{key:i,class:"time-group"},[u("h3",H,l(i),1),u("ul",null,[(r(!0),o(f,null,p(c,a=>{var d;return r(),o("li",{key:a.id,class:"list-item-obj"},[v(n,{to:"/event/"+(((d=a["id-name"])==null?void 0:d.trim())||a.id),class:"list-item-link"},{default:F(()=>[u("div",U,[u("strong",$,[a.name?(r(),o("div",z,[V(l(a.name)+" ",1),a.actsIDArr.length?(r(),o("span",J," ("+l(I(a.actsIDArr))+") ",1)):E("",!0)])):a.actsIDArr.length?(r(),o("div",O,l(I(a.actsIDArr)),1)):(r(),o("div",R,l(t.$t("Unknown")),1))]),u("span",W,[u("span",null,l(b(a.stageID)),1),u("span",null,l(D(_)(a.start_time,"Date Long"))+", "+l(D(_)(a.start_time,"Time"))+" â€“ "+l(D(_)(a.end_time,"Time")),1),u("span",null,[v(j,{name:a.type,class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),v(Q,{itemId:a.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])}}}),st=K(X,[["__scopeId","data-v-2cd08bc7"]]);export{st as S};
