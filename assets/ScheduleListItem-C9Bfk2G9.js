import{f as _,g as x}from"./config-DAIZIwe_.js";import{u as F}from"./useEventData-CnDWhOPI.js";import{F as V}from"./FavBtn-CqPeixFh.js";import{T as M}from"./tagLabel-Ba7w3rnQ.js";import{d as q,c as L,a as o,F as f,m as p,b as u,t as l,e as v,z as E,q as K,y as P,u as D,A as Q,o as r,_ as j}from"./index-opfNOqc4.js";const z={class:"group-head head-date"},U={class:"group-head head-time pad"},$={class:"list-item-info pad"},G={class:"list-item-name"},H={key:0},J={key:0},O={key:1},R={key:2},W={class:"list-item-tags"},X=q({__name:"ScheduleListItem",props:{filters:{}},setup(A){const{performances:w,acts:h,stages:y}=F(),C=A,N=t=>{const e=y.value.find(n=>n.id===t);return e?e.name:"Stage not found"},I=t=>x(t,h),S=L(()=>{const t=C.filters;return w.value.filter(e=>{var n;if(t.stages.length&&!t.stages.includes(String(e.stageID))||t.types.length&&!t.types.includes(e.type)||t.performanceTags.length&&(!e.tags||!e.tags.some(s=>t.performanceTags.includes(s)))||t.categories.length&&!e.actsIDArr.map(c=>h.value.find(i=>i.id===c)).filter(Boolean).flatMap(c=>c.tags.filter(i=>i.visible).map(i=>i.name)).some(c=>t.categories.includes(c))||t.actIDs.length&&!t.actIDs.some(s=>e.actsIDArr.includes(Number(s)))||t.performanceIDs.length&&!t.performanceIDs.some(s=>e.id===Number(s)))return!1;if(t.searchQuery){const s=t.searchQuery.toLowerCase(),g=(e.name||"").toLowerCase().includes(s)||(e.description||"").toLowerCase().includes(s),c=e.actsIDArr.some(d=>{var T,k;const m=h.value.find(B=>B.id===d);return((T=m==null?void 0:m.name)==null?void 0:T.toLowerCase().includes(s))||((k=m==null?void 0:m.description)==null?void 0:k.toLowerCase().includes(s))}),i=y.value.find(d=>d.id===e.stageID),a=(n=i==null?void 0:i.name)==null?void 0:n.toLowerCase().includes(s);if(!g&&!c&&!a)return!1}return!0}).sort((e,n)=>new Date(e.start_time).getTime()-new Date(n.start_time).getTime())}),b=L(()=>{const t={};for(const e of S.value){const n=_(e.start_time,"Date Long"),s=_(e.start_time,"Time");t[n]||(t[n]={}),t[n][s]||(t[n][s]=[]),t[n][s].push(e)}return t});return(t,e)=>{const n=Q("router-link");return r(),o("div",null,[(r(!0),o(f,null,p(b.value,(s,g)=>(r(),o("div",{key:g,class:"date-group"},[u("h2",z,l(g),1),(r(!0),o(f,null,p(s,(c,i)=>(r(),o("div",{key:i,class:"time-group"},[u("h3",U,l(i),1),u("ul",null,[(r(!0),o(f,null,p(c,a=>{var d;return r(),o("li",{key:a.id,class:"list-item-obj"},[v(n,{to:"/event/"+(((d=a["id-name"])==null?void 0:d.trim())||a.id),class:"list-item-link"},{default:E(()=>[u("div",$,[u("strong",G,[a.name?(r(),o("div",H,[K(l(a.name)+" ",1),a.actsIDArr.length?(r(),o("span",J," ("+l(I(a.actsIDArr))+") ",1)):P("",!0)])):a.actsIDArr.length?(r(),o("div",O,l(I(a.actsIDArr)),1)):(r(),o("div",R,l(t.$t("Unknown")),1))]),u("span",W,[u("span",null,l(N(a.stageID)),1),u("span",null,l(D(_)(a.start_time,"Date Long"))+", "+l(D(_)(a.start_time,"Time"))+" â€“ "+l(D(_)(a.end_time,"Time")),1),u("span",null,[v(M,{name:a.type,class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),v(V,{itemId:a.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])}}}),at=j(X,[["__scopeId","data-v-a872189c"]]);export{at as S};
