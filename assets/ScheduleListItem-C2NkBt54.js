import{d as M,c as f,f as g,a as i,F as p,q as y,b as c,B as D,t as u,g as I,E as j,v as q,G as K,u as k,H as P,m as Q,o as l,_ as x}from"./index-BqFBmlSM.js";import{u as G}from"./useEventData-B77tR4ZE.js";import{F as H}from"./FavBtn-Ds4G2boc.js";import{T as O}from"./tagLabel-Cai73fpQ.js";const R={class:"date-navigation group-head"},U=["onClick"],z=["id"],J=["onClick"],W={class:"group-head head-time pad"},X={class:"list-item-info pad"},Y={class:"list-item-name"},Z={key:0},tt={key:0},et={key:1},st={key:2},at={class:"list-item-tags"},nt=M({__name:"ScheduleListItem",props:{filters:{}},setup(N){const S=Q(),_=f(()=>Object.keys(b.value).sort());function T(t){S.replace({hash:`#${t}`});const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}const{performances:B,acts:v,stages:C}=G(),V=N,E=t=>{const e=C.value.find(n=>n.id===t);return e?e.name:"Stage not found"},L=t=>K(t,v),F=f(()=>{const t=V.filters;return B.value.filter(e=>{var n;if(t.stages.length&&!t.stages.includes(String(e.stageID))||t.types.length&&!t.types.includes(e.type)||t.performanceTags.length&&(!e.tags||!e.tags.some(a=>t.performanceTags.includes(a)))||t.categories.length&&!e.actsIDArr.map(r=>v.value.find(o=>o.id===r)).filter(Boolean).flatMap(r=>r.tags.filter(o=>o.visible).map(o=>o.name)).some(r=>t.categories.includes(r))||t.actIDs.length&&!t.actIDs.some(a=>e.actsIDArr.includes(Number(a)))||t.performanceIDs.length&&!t.performanceIDs.some(a=>e.id===Number(a)))return!1;if(t.searchQuery){const a=t.searchQuery.toLowerCase(),m=(e.name||"").toLowerCase().includes(a)||(e.description||"").toLowerCase().includes(a),r=e.actsIDArr.some(s=>{var w,A;const d=v.value.find($=>$.id===s);return((w=d==null?void 0:d.name)==null?void 0:w.toLowerCase().includes(a))||((A=d==null?void 0:d.description)==null?void 0:A.toLowerCase().includes(a))}),o=C.value.find(s=>s.id===e.stageID),h=(n=o==null?void 0:o.name)==null?void 0:n.toLowerCase().includes(a);if(!m&&!r&&!h)return!1}return!0}).sort((e,n)=>new Date(e.start_time).getTime()-new Date(n.start_time).getTime())}),b=f(()=>{const t={};for(const e of F.value){const n=g(e.start_time,"Date Long"),a=g(e.start_time,"Time");t[n]||(t[n]={}),t[n][a]||(t[n][a]=[]),t[n][a].push(e)}return t});return(t,e)=>{const n=P("router-link");return l(),i("div",null,[(l(!0),i(p,null,y(b.value,(a,m,r)=>(l(),i("div",{key:m,class:"date-group"},[c("div",R,[_.value[r-1]?(l(),i("button",{key:0,onClick:o=>T(_.value[r-1]),class:"nav-arrow"}," < ",8,U)):D("",!0),c("h2",{class:"head-date",id:m},u(m),9,z),_.value[r+1]?(l(),i("button",{key:1,onClick:o=>T(_.value[r+1]),class:"nav-arrow"}," > ",8,J)):D("",!0)]),(l(!0),i(p,null,y(a,(o,h)=>(l(),i("div",{key:h,class:"time-group"},[c("h3",W,u(h),1),c("ul",null,[(l(!0),i(p,null,y(o,s=>{var d;return l(),i("li",{key:s.id,class:"list-item-obj"},[I(n,{to:"/event/"+(((d=s["id-name"])==null?void 0:d.trim())||s.id),class:"list-item-link"},{default:j(()=>[c("div",X,[c("strong",Y,[s.name?(l(),i("div",Z,[q(u(s.name)+" ",1),s.actsIDArr.length?(l(),i("span",tt," ("+u(L(s.actsIDArr))+") ",1)):D("",!0)])):s.actsIDArr.length?(l(),i("div",et,u(L(s.actsIDArr)),1)):(l(),i("div",st,u(t.$t("Unknown")),1))]),c("span",at,[c("span",null,u(E(s.stageID)),1),c("span",null,u(k(g)(s.start_time,"Date Long"))+", "+u(k(g)(s.start_time,"Time"))+" â€“ "+u(k(g)(s.end_time,"Time")),1),c("span",null,[I(O,{name:s.type,class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),I(H,{itemId:s.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])}}}),ct=x(nt,[["__scopeId","data-v-a4cf9ab3"]]);export{ct as S};
