import{d as $,a as o,b as c,t as u,u as p,f,o as n,_ as B,c as k,w as O,z as S,F as L,C as w,g as y,D as z,H as K,p as P,J as Q,G as q,L as G}from"./index-DlCM3WY9.js";import{u as J}from"./useEventData-B_du0pl_.js";import{F as R,T as U}from"./TagLabel-Botgd6tr.js";import{N as W}from"./NoEntries-Du4w9293.js";const X={class:"group-head"},Y={class:"date-nav-container"},Z={key:1,class:"nav-arrow nav-left"},x=["id"],ee={key:3,class:"nav-arrow nav-right"},te=$({__name:"DateHead",props:{date:{},index:{},sortedDateList:{},scrollToDate:{type:Function}},setup(C){return(i,_)=>(n(),o("div",X,[c("div",Y,[i.sortedDateList[i.index-1]?(n(),o("button",{key:0,class:"nav-arrow nav-left",onClick:_[0]||(_[0]=D=>i.scrollToDate(i.sortedDateList[i.index-1]))}," < ")):(n(),o("div",Z)),c("h2",{class:"head-date",id:i.date},u(p(f)(i.date,"Date Long")),9,x),i.sortedDateList[i.index+1]?(n(),o("button",{key:2,class:"nav-arrow nav-right",onClick:_[1]||(_[1]=D=>i.scrollToDate(i.sortedDateList[i.index+1]))}," > ")):(n(),o("div",ee))])]))}}),se=B(te,[["__scopeId","data-v-97f52d27"]]),ae={class:"scroll-head full-height"},ne={class:"scroll-y-area"},oe={class:"group-head head-time pad"},ie={class:"list-item-ul"},re={class:"list-item-info pad"},le={class:"list-item-name"},ce={key:0},de={key:0},ue={key:1},me={key:2},ge={class:"list-item-tags"},he=$({__name:"ScheduleListItem",props:{filters:{}},setup(C){const i=P(),_=k(()=>Object.keys(I.value).sort());function D(e){i.replace({hash:`#${e}`});const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}const{performances:F,acts:v,stages:T}=J(),M=C,V=e=>{const t=T.value.find(l=>l.id===e);return t?t.name:"Stage not found"},b=(e=[])=>q(e,v),E=k(()=>{const e=M.filters;return F.value.filter(t=>{var l;if(e.stages.length&&!e.stages.includes(String(t.stageID)))return!1;if(e.stageTypes.length){const s=T.value.find(m=>m.id===t.stageID);if(!s||!e.stageTypes.includes(s.type))return!1}if(e.perforTypes.length&&!e.perforTypes.includes(t.type)||e.performanceTags.length&&(!t.tags||!t.tags.some(s=>e.performanceTags.includes(s)))||e.categories.length&&!t.actsIDArr.map(r=>v.value.find(d=>d.id===r)).filter(Boolean).flatMap(r=>r.tags.map(d=>d.name)).some(r=>e.categories.includes(r))||e.actTypes.length&&!t.actsIDArr.some(m=>{const r=v.value.find(h=>h.id===m);return((r==null?void 0:r["act-type"])||[]).some(h=>e.actTypes.includes(h))})||e.actIDs.length&&!e.actIDs.some(s=>t.actsIDArr.includes(Number(s)))||e.performanceIDs.length&&!e.performanceIDs.some(s=>t.id===Number(s)))return!1;if(e.searchQuery){const s=e.searchQuery.toLowerCase(),m=(t.name||"").toLowerCase().includes(s)||(t.description||"").toLowerCase().includes(s),r=t.actsIDArr.some(a=>{var A,N;const g=v.value.find(H=>H.id===a);return((A=g==null?void 0:g.name)==null?void 0:A.toLowerCase().includes(s))||((N=g==null?void 0:g.description)==null?void 0:N.toLowerCase().includes(s))}),d=T.value.find(a=>a.id===t.stageID),h=(l=d==null?void 0:d.name)==null?void 0:l.toLowerCase().includes(s);if(!m&&!r&&!h)return!1}return!0}).sort(j)});function j(e,t){return new Date(e.start_time).getTime()-new Date(t.start_time).getTime()}const I=k(()=>{const e={};for(const t of E.value){const l=f(t.start_time,"ISO"),s=f(t.start_time,"Time");e[l]||(e[l]={}),e[l][s]||(e[l][s]=[]),e[l][s].push(t)}return e});return(e,t)=>{const l=K("router-link");return n(),o("div",ae,[c("div",ne,[Object.keys(I.value).length===0?(n(),O(W,{key:0,type:"event"})):S("",!0),(n(!0),o(L,null,w(I.value,(s,m,r)=>(n(),o("div",{key:m,class:"date-group"},[y(se,{date:m,index:r,sortedDateList:_.value,scrollToDate:D},null,8,["date","index","sortedDateList"]),(n(!0),o(L,null,w(s,(d,h)=>(n(),o("div",{key:h,class:"time-group"},[c("h3",oe,u(h),1),c("ul",ie,[(n(!0),o(L,null,w(d,a=>{var g;return n(),o("li",{key:a.id,class:"list-item-obj"},[y(l,{to:`/event/${((g=a["id-name"])==null?void 0:g.trim())||a.id}`,class:"list-item-link"},{default:z(()=>[c("div",re,[c("strong",le,[a.name?(n(),o("div",ce,[Q(u(a.name)+" ",1),a.actsIDArr.length?(n(),o("span",de," ("+u(b(a.actsIDArr))+") ",1)):S("",!0)])):a.actsIDArr.length?(n(),o("div",ue,u(b(a.actsIDArr)),1)):(n(),o("div",me,u(e.$t("Unknown")),1))]),c("span",ge,[c("span",null,u(V(a.stageID)),1),c("span",null,u(p(f)(a.start_time,"Date Long"))+", "+u(p(f)(a.start_time,"Time"))+" â€“ "+u(p(f)(a.end_time,"Time")),1),c("span",null,[y(U,{name:p(G)(a.type),class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),y(R,{itemId:a.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])])}}}),ye=B(he,[["__scopeId","data-v-851133c0"]]);export{se as D,ye as S};
