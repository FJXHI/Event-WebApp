import{u as S,f as m}from"./useEventData-MA-LWvnG.js";import{F as b}from"./FavBtn-BANH4ZLA.js";import{d as C,b as D,c as a,F as f,h,a as u,t as l,e as y,q as B,j as x,p as F,u as p,s as V,o as i,_ as j}from"./index-B1us5al-.js";const M={class:"list-item-info"},q={class:"list-item-name"},E={key:0},K={key:0},P={key:1},Q={key:2},U={class:"list-item-tags"},$=C({__name:"ScheduleListItem",props:{filters:{}},setup(I){const{performances:T,acts:_,stages:k}=S(),A=I,w=t=>{const s=k.value.find(e=>e.id===t);return s?s.name:"Stage not found"},v=(t=[])=>t.map(s=>{const e=_.value.find(r=>r.id===s);return e?e.name:"Unknown Artist"}).join(", "),L=D(()=>{const t=A.filters;return T.value.filter(s=>{if(t.stages.length&&!t.stages.includes(String(s.stageID))||t.types.length&&!t.types.includes(s.type)||t.performanceTags.length&&(!s.tags||!s.tags.some(e=>t.performanceTags.includes(e)))||t.categories.length&&!s.actsIDArr.map(o=>_.value.find(c=>c.id===o)).filter(Boolean).flatMap(o=>o.tags.filter(c=>c.visible).map(c=>c.name)).some(o=>t.categories.includes(o))||t.actIDs.length&&!t.actIDs.some(e=>s.actsIDArr.includes(Number(e)))||t.performanceIDs.length&&!t.performanceIDs.some(e=>s.id===Number(e)))return!1;if(t.searchQuery){const e=t.searchQuery.toLowerCase(),r=(s.description||"").toLowerCase().includes(e),o=s.actsIDArr.some(c=>{var n;const d=_.value.find(g=>g.id===c);return(n=d==null?void 0:d.description)==null?void 0:n.toLowerCase().includes(e)});if(!r&&!o)return!1}return!0}).sort((s,e)=>new Date(s.start_time).getTime()-new Date(e.start_time).getTime())}),N=D(()=>{const t={};for(const s of L.value){const e=m(s.start_time,"Date Long"),r=m(s.start_time,"Time");t[e]||(t[e]={}),t[e][r]||(t[e][r]=[]),t[e][r].push(s)}return t});return(t,s)=>{const e=V("router-link");return i(),a("div",null,[(i(!0),a(f,null,h(N.value,(r,o)=>(i(),a("div",{key:o,class:"date-group"},[u("h2",null,l(o),1),(i(!0),a(f,null,h(r,(c,d)=>(i(),a("div",{key:d,class:"time-group"},[u("h3",null,l(d),1),u("ul",null,[(i(!0),a(f,null,h(c,n=>{var g;return i(),a("li",{key:n.id,class:"list-item-obj"},[y(e,{to:"/event/"+(((g=n["id-name"])==null?void 0:g.trim())||n.id),class:"list-item-link"},{default:B(()=>[u("div",M,[u("strong",q,[n.name?(i(),a("div",E,[x(l(n.name)+" ",1),n.actsIDArr.length?(i(),a("span",K," ("+l(v(n.actsIDArr))+") ",1)):F("",!0)])):n.actsIDArr.length?(i(),a("div",P,l(v(n.actsIDArr)),1)):(i(),a("div",Q,l(t.$t("Unknown")),1))]),u("span",U,[u("span",null,l(w(n.stageID))+": ",1),u("span",null,l(p(m)(n.start_time,"Date Long"))+", "+l(p(m)(n.start_time,"Time"))+" â€“ "+l(p(m)(n.end_time,"Time")),1)])])]),_:2},1032,["to"]),y(b,{itemId:n.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])}}}),J=j($,[["__scopeId","data-v-ad79cab7"]]);export{J as S};
