import{d as S,c as v,q as $,r as f,a as i,w as O,y as C,z as V,b as r,x as E,g as h,t as u,F as T,C as w,D as M,H as j,o as l,u as x}from"./index-CPXJwdLf.js";import{u as F}from"./useEventData-CGAfq2kc.js";import{F as z,T as H}from"./TagLabel-B8pI4c43.js";import{S as J,F as Q}from"./SearchBar-DSWaZ_K7.js";const R={class:"scroll-head full-height"},G={class:"btn-header"},K={class:"scroll-y-area"},P={key:0,class:"list-item-ul"},U={class:"list-item-info pad"},W={class:"list-item-name"},X={class:"list-item-tags"},Y={key:1},Z=S({__name:"ActList",props:{filterID:{}},setup(k){const g=$(),y=v(()=>g.query.search??"false"),d=f(""),_=e=>{d.value=e.toLowerCase().trim()},o=f(!1),{acts:c}=F(),I=k,s=f({categories:[],actTypes:[],actIDs:[]}),L=e=>{s.value.categories=e.categories||[],s.value.actTypes=e.actTypes||[],s.value.actIDs=e.actIDs||[]},A=v(()=>{if(!c.value||c.value.length===0)return[];let e=c.value;if(I.filterID&&I.filterID.length>0&&(e=e.filter(t=>I.filterID.includes(t.id))),s.value.actIDs&&s.value.actIDs.length>0&&(e=e.filter(t=>s.value.actIDs.includes(t.id))),s.value.categories&&s.value.categories.length>0&&(e=e.filter(t=>{var n;return(n=t.tags)==null?void 0:n.some(a=>s.value.categories.includes(a.name))})),s.value.actTypes&&s.value.actTypes.length>0&&(e=e.filter(t=>(t["act-type"]||[]).some(a=>s.value.actTypes.includes(a)))),d.value&&(!s.value.actIDs||s.value.actIDs.length===0)){const t=d.value.toLowerCase();e=e.filter(n=>{var a,m;return((a=n.name)==null?void 0:a.toLowerCase().includes(t))||((m=n.description)==null?void 0:m.toLowerCase().includes(t))})}return e}),p=f("name"),B=()=>{p.value=p.value==="name"?"id":"name"},q=v(()=>p.value==="name"?"id":"name"),b=v(()=>[...A.value].sort((e,t)=>p.value==="name"?e.name.localeCompare(t.name,"de",{sensitivity:"base"}):e.id-t.id));return(e,t)=>{const n=j("router-link");return l(),i("div",R,[O(h(J,{onApply:_},null,512),[[E,y.value==="true"]]),o.value?(l(),C(Q,{key:0,showCategoryFilter:!0,showActTypeFilter:!0,"initial-categories":s.value.categories,"initial-act-types":s.value.actTypes,onApply:L,onClose:t[0]||(t[0]=a=>o.value=!1)},null,8,["initial-categories","initial-act-types"])):V("",!0),r("div",G,[r("button",{class:"btn half left",onClick:B},u(e.$t("sort-by"))+": "+u(e.$t(q.value)),1),r("button",{onClick:t[1]||(t[1]=a=>o.value=!0),class:"btn right"},u(e.$t("open-filter")),1)]),r("div",K,[b.value.length>0?(l(),i("ul",P,[(l(!0),i(T,null,w(b.value,a=>{var m;return l(),i("li",{key:a.id,class:"list-item-obj"},[h(n,{to:"/act/"+((m=a["id-name"])!=null&&m.trim()?a["id-name"]:a.id),class:"list-item-link"},{default:M(()=>[r("div",U,[r("strong",W,u(a.name),1),r("span",X,[(l(!0),i(T,null,w(a.tags.filter(D=>D.visible),(D,N)=>(l(),C(H,{key:N,name:D.name,class:"tag-label-item TagLabel"},null,8,["name"]))),128))])])]),_:2},1032,["to"]),h(z,{itemId:String(a.id),itemType:"act",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])):(l(),i("p",Y,u(e.$t("no-acts")),1))])])}}}),ee={class:"list-view full-height"},te={key:0,class:"full-height"},se={key:1},ne=S({__name:"ActsView",setup(k){const{acts:g}=F(),y=$(),d=v(()=>y.query.fav==="true"),_=v(()=>{const o=localStorage.getItem("act");return o?JSON.parse(o).map(c=>parseInt(c)):[]});return(o,c)=>(l(),i("div",ee,[x(g).length>0?(l(),i("div",te,[h(Z,{filterID:d.value?_.value:void 0,class:"full-height"},null,8,["filterID"])])):(l(),i("p",se,u(o.$t("no-acts")),1))]))}});export{ne as default};
