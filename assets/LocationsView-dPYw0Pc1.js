import{d as b,c as m,q as C,r as g,a as n,b as l,w as L,y as I,z as T,x as $,g as p,t as d,F as B,C as N,D as V,H as q,o as a,u as x}from"./index-DNwih5LS.js";import{u as D}from"./useEventData-CZyIsGOf.js";import{F as A,T as E}from"./TagLabel-BjZhpdUn.js";import{S as M,F as O}from"./SearchBar-C-rSIHpq.js";const j={class:"locations-list"},z={class:"app-head"},H={class:"btn-header"},J={class:"app-body"},Q={key:0,class:"list-item-ul"},R={class:"list-item-info pad"},G={class:"list-item-name"},K={class:"list-item-tags"},P={key:1},U=b({__name:"LocationList",props:{filterID:{}},setup(k){const v=C(),f=m(()=>v.query.search??"false"),i=g(""),_=e=>{i.value=e.toLowerCase().trim()},o=g(!1),{stages:r}=D(),y=k,u=g({stageTypes:[]}),F=e=>{u.value.stageTypes=e.stageTypes||[]},w=m(()=>{if(!r.value||r.value.length===0)return[];let e=r.value;return y.filterID&&y.filterID.length>0&&(e=e.filter(t=>y.filterID.includes(t.id))),u.value.stageTypes.length>0&&(e=e.filter(t=>t.type&&u.value.stageTypes.includes(t.type))),i.value&&(e=e.filter(t=>{var c,S;const h=((c=t.name)==null?void 0:c.toLowerCase())||"",s=((S=t.description)==null?void 0:S.toLowerCase())||"";return h.includes(i.value)||s.includes(i.value)})),e});return(e,t)=>{const h=q("router-link");return a(),n("div",j,[l("div",z,[L(p(M,{onApply:_},null,512),[[$,f.value==="true"]]),o.value?(a(),I(O,{key:0,showStageTypeFilter:!0,"initial-stage-types":u.value.stageTypes,onApply:F,onClose:t[0]||(t[0]=s=>o.value=!1)},null,8,["initial-stage-types"])):T("",!0)]),l("div",H,[l("button",{onClick:t[1]||(t[1]=s=>o.value=!0),class:"btn full"},d(e.$t("open-filter")),1)]),l("div",J,[w.value.length>0?(a(),n("ul",Q,[(a(!0),n(B,null,N(w.value,s=>{var c;return a(),n("li",{key:s.id,class:"list-item-obj"},[p(h,{to:"/location/"+((c=s["id-name"])!=null&&c.trim()?s["id-name"]:s.id),class:"list-item-link"},{default:V(()=>[l("div",R,[l("strong",G,d(s.name),1),l("span",K,[s.type?(a(),I(E,{key:0,name:s.type,class:"tag-label-item TagLabel"},null,8,["name"])):T("",!0)])])]),_:2},1032,["to"]),p(A,{itemId:String(s.id),itemType:"stage",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])):(a(),n("p",P,d(e.$t("no-locations")),1))])])}}}),W={class:"list-view"},X={key:0},Y={key:1},ae=b({__name:"LocationsView",setup(k){const{stages:v}=D(),f=C(),i=m(()=>f.query.fav==="true"),_=m(()=>{const o=localStorage.getItem("stage");return o?JSON.parse(o).map(r=>parseInt(r)):[]});return(o,r)=>(a(),n("div",W,[x(v).length>0?(a(),n("div",X,[p(U,{filterID:i.value?_.value:void 0},null,8,["filterID"])])):(a(),n("p",Y,d(o.$t("no-locations")),1))]))}});export{ae as default};
