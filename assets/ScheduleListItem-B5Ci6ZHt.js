import{u as S,f as m}from"./useEventData-CJiLa8jm.js";import{F as b}from"./FavBtn-Cmrpq5Yq.js";import{T as C}from"./tagLabel-DiCZHeMZ.js";import{d as B,b as y,c as n,F as h,h as f,a as u,t as l,e as p,q as x,j as F,p as V,u as v,s as j,o as i,_ as M}from"./index-Cdaev5QM.js";const q={class:"group-head head-date"},E={class:"group-head head-time pad"},K={class:"list-item-info pad"},P={class:"list-item-name"},Q={key:0},U={key:0},$={key:1},z={key:2},G={class:"list-item-tags"},H=B({__name:"ScheduleListItem",props:{filters:{}},setup(I){const{performances:T,acts:_,stages:k}=S(),A=I,L=t=>{const s=k.value.find(e=>e.id===t);return s?s.name:"Stage not found"},D=(t=[])=>t.map(s=>{const e=_.value.find(o=>o.id===s);return e?e.name:"Unknown Artist"}).join(", "),w=y(()=>{const t=A.filters;return T.value.filter(s=>{if(t.stages.length&&!t.stages.includes(String(s.stageID))||t.types.length&&!t.types.includes(s.type)||t.performanceTags.length&&(!s.tags||!s.tags.some(e=>t.performanceTags.includes(e)))||t.categories.length&&!s.actsIDArr.map(r=>_.value.find(c=>c.id===r)).filter(Boolean).flatMap(r=>r.tags.filter(c=>c.visible).map(c=>c.name)).some(r=>t.categories.includes(r))||t.actIDs.length&&!t.actIDs.some(e=>s.actsIDArr.includes(Number(e)))||t.performanceIDs.length&&!t.performanceIDs.some(e=>s.id===Number(e)))return!1;if(t.searchQuery){const e=t.searchQuery.toLowerCase(),o=(s.description||"").toLowerCase().includes(e),r=s.actsIDArr.some(c=>{var a;const d=_.value.find(g=>g.id===c);return(a=d==null?void 0:d.description)==null?void 0:a.toLowerCase().includes(e)});if(!o&&!r)return!1}return!0}).sort((s,e)=>new Date(s.start_time).getTime()-new Date(e.start_time).getTime())}),N=y(()=>{const t={};for(const s of w.value){const e=m(s.start_time,"Date Long"),o=m(s.start_time,"Time");t[e]||(t[e]={}),t[e][o]||(t[e][o]=[]),t[e][o].push(s)}return t});return(t,s)=>{const e=j("router-link");return i(),n("div",null,[(i(!0),n(h,null,f(N.value,(o,r)=>(i(),n("div",{key:r,class:"date-group"},[u("h2",q,l(r),1),(i(!0),n(h,null,f(o,(c,d)=>(i(),n("div",{key:d,class:"time-group"},[u("h3",E,l(d),1),u("ul",null,[(i(!0),n(h,null,f(c,a=>{var g;return i(),n("li",{key:a.id,class:"list-item-obj"},[p(e,{to:"/event/"+(((g=a["id-name"])==null?void 0:g.trim())||a.id),class:"list-item-link"},{default:x(()=>[u("div",K,[u("strong",P,[a.name?(i(),n("div",Q,[F(l(a.name)+" ",1),a.actsIDArr.length?(i(),n("span",U," ("+l(D(a.actsIDArr))+") ",1)):V("",!0)])):a.actsIDArr.length?(i(),n("div",$,l(D(a.actsIDArr)),1)):(i(),n("div",z,l(t.$t("Unknown")),1))]),u("span",G,[u("span",null,l(L(a.stageID)),1),u("span",null,l(v(m)(a.start_time,"Date Long"))+", "+l(v(m)(a.start_time,"Time"))+" â€“ "+l(v(m)(a.end_time,"Time")),1),u("span",null,[p(C,{name:a.type},null,8,["name"])])])])]),_:2},1032,["to"]),p(b,{itemId:a.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])}}}),X=M(H,[["__scopeId","data-v-ecada4ca"]]);export{X as S};
