import{d as $,c as f,f as g,a as n,F as p,q as y,b as c,t as u,g as D,E as M,v as j,B as q,G as K,u as k,H as P,m as Q,o,_ as x}from"./index-C6aqn4Tf.js";import{u as G}from"./useEventData-Djb2Trdx.js";import{F as H}from"./FavBtn-DzvR5e13.js";import{T as O}from"./tagLabel-CxTn1zp1.js";const R={class:"group-head"},U={class:"date-nav-container"},z=["onClick"],J={key:1,class:"nav-arrow nav-left"},W=["id"],X=["onClick"],Y={key:3,class:"nav-arrow nav-right"},Z={class:"group-head head-time pad"},tt={class:"list-item-info pad"},et={class:"list-item-name"},st={key:0},at={key:0},nt={key:1},ot={key:2},it={class:"list-item-tags"},lt=$({__name:"ScheduleListItem",props:{filters:{}},setup(A){const N=Q(),_=f(()=>Object.keys(C.value).sort());function I(t){N.replace({hash:`#${t}`});const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}const{performances:S,acts:v,stages:T}=G(),B=A,V=t=>{const e=T.value.find(i=>i.id===t);return e?e.name:"Stage not found"},w=t=>K(t,v),E=f(()=>{const t=B.filters;return S.value.filter(e=>{var i;if(t.stages.length&&!t.stages.includes(String(e.stageID))||t.types.length&&!t.types.includes(e.type)||t.performanceTags.length&&(!e.tags||!e.tags.some(a=>t.performanceTags.includes(a)))||t.categories.length&&!e.actsIDArr.map(r=>v.value.find(l=>l.id===r)).filter(Boolean).flatMap(r=>r.tags.filter(l=>l.visible).map(l=>l.name)).some(r=>t.categories.includes(r))||t.actIDs.length&&!t.actIDs.some(a=>e.actsIDArr.includes(Number(a)))||t.performanceIDs.length&&!t.performanceIDs.some(a=>e.id===Number(a)))return!1;if(t.searchQuery){const a=t.searchQuery.toLowerCase(),m=(e.name||"").toLowerCase().includes(a)||(e.description||"").toLowerCase().includes(a),r=e.actsIDArr.some(s=>{var L,b;const d=v.value.find(F=>F.id===s);return((L=d==null?void 0:d.name)==null?void 0:L.toLowerCase().includes(a))||((b=d==null?void 0:d.description)==null?void 0:b.toLowerCase().includes(a))}),l=T.value.find(s=>s.id===e.stageID),h=(i=l==null?void 0:l.name)==null?void 0:i.toLowerCase().includes(a);if(!m&&!r&&!h)return!1}return!0}).sort((e,i)=>new Date(e.start_time).getTime()-new Date(i.start_time).getTime())}),C=f(()=>{const t={};for(const e of E.value){const i=g(e.start_time,"Date Long"),a=g(e.start_time,"Time");t[i]||(t[i]={}),t[i][a]||(t[i][a]=[]),t[i][a].push(e)}return t});return(t,e)=>{const i=P("router-link");return o(),n("div",null,[(o(!0),n(p,null,y(C.value,(a,m,r)=>(o(),n("div",{key:m,class:"date-group"},[c("div",R,[c("div",U,[_.value[r-1]?(o(),n("button",{key:0,class:"nav-arrow nav-left",onClick:l=>I(_.value[r-1])}," < ",8,z)):(o(),n("div",J)),c("h2",{class:"head-date",id:m},u(m),9,W),_.value[r+1]?(o(),n("button",{key:2,class:"nav-arrow nav-right",onClick:l=>I(_.value[r+1])}," > ",8,X)):(o(),n("div",Y))])]),(o(!0),n(p,null,y(a,(l,h)=>(o(),n("div",{key:h,class:"time-group"},[c("h3",Z,u(h),1),c("ul",null,[(o(!0),n(p,null,y(l,s=>{var d;return o(),n("li",{key:s.id,class:"list-item-obj"},[D(i,{to:"/event/"+(((d=s["id-name"])==null?void 0:d.trim())||s.id),class:"list-item-link"},{default:M(()=>[c("div",tt,[c("strong",et,[s.name?(o(),n("div",st,[j(u(s.name)+" ",1),s.actsIDArr.length?(o(),n("span",at," ("+u(w(s.actsIDArr))+") ",1)):q("",!0)])):s.actsIDArr.length?(o(),n("div",nt,u(w(s.actsIDArr)),1)):(o(),n("div",ot,u(t.$t("Unknown")),1))]),c("span",it,[c("span",null,u(V(s.stageID)),1),c("span",null,u(k(g)(s.start_time,"Date Long"))+", "+u(k(g)(s.start_time,"Time"))+" â€“ "+u(k(g)(s.end_time,"Time")),1),c("span",null,[D(O,{name:s.type,class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),D(H,{itemId:s.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])}}}),mt=x(lt,[["__scopeId","data-v-108f5848"]]);export{mt as S};
