import{d as $,c as y,f as h,a as o,F as T,C as D,b as c,t as d,g as I,D as E,H as j,p as z,o as i,J as K,z as P,G as Q,u as f,L as q,_ as x}from"./index-C__xxzqB.js";import{u as G}from"./useEventData-jweThlje.js";import{F as H,T as J}from"./TagLabel-CiNlt0xw.js";const O={class:"group-head"},R={class:"date-nav-container"},U=["onClick"],W={key:1,class:"nav-arrow nav-left"},X=["id"],Y=["onClick"],Z={key:3,class:"nav-arrow nav-right"},ee={class:"group-head head-time pad"},te={class:"list-item-info pad"},se={class:"list-item-name"},ae={key:0},ne={key:0},oe={key:1},ie={key:2},le={class:"list-item-tags"},re=$({__name:"ScheduleListItem",props:{filters:{}},setup(b){const N=z(),_=y(()=>Object.keys(C.value).sort());function k(e){N.replace({hash:`#${e}`});const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}const{performances:S,acts:v,stages:p}=G(),B=b,M=e=>{const t=p.value.find(l=>l.id===e);return t?t.name:"Stage not found"},w=e=>Q(e,v),V=y(()=>{const e=B.filters;return S.value.filter(t=>{var l;if(e.stages.length&&!e.stages.includes(String(t.stageID)))return!1;if(e.stageTypes.length){const s=p.value.find(u=>u.id===t.stageID);if(!s||!e.stageTypes.includes(s.type))return!1}if(e.perforTypes.length&&!e.perforTypes.includes(t.type)||e.performanceTags.length&&(!t.tags||!t.tags.some(s=>e.performanceTags.includes(s)))||e.categories.length&&!t.actsIDArr.map(n=>v.value.find(r=>r.id===n)).filter(Boolean).flatMap(n=>n.tags.map(r=>r.name)).some(n=>e.categories.includes(n))||e.actTypes.length&&!t.actsIDArr.some(u=>{const n=v.value.find(g=>g.id===u);return((n==null?void 0:n["act-type"])||[]).some(g=>e.actTypes.includes(g))})||e.actIDs.length&&!e.actIDs.some(s=>t.actsIDArr.includes(Number(s)))||e.performanceIDs.length&&!e.performanceIDs.some(s=>t.id===Number(s)))return!1;if(e.searchQuery){const s=e.searchQuery.toLowerCase(),u=(t.name||"").toLowerCase().includes(s)||(t.description||"").toLowerCase().includes(s),n=t.actsIDArr.some(a=>{var L,A;const m=v.value.find(F=>F.id===a);return((L=m==null?void 0:m.name)==null?void 0:L.toLowerCase().includes(s))||((A=m==null?void 0:m.description)==null?void 0:A.toLowerCase().includes(s))}),r=p.value.find(a=>a.id===t.stageID),g=(l=r==null?void 0:r.name)==null?void 0:l.toLowerCase().includes(s);if(!u&&!n&&!g)return!1}return!0}).sort((t,l)=>new Date(t.start_time).getTime()-new Date(l.start_time).getTime())}),C=y(()=>{const e={};for(const t of V.value){const l=h(t.start_time,"Date Long"),s=h(t.start_time,"Time");e[l]||(e[l]={}),e[l][s]||(e[l][s]=[]),e[l][s].push(t)}return e});return(e,t)=>{const l=j("router-link");return i(),o("div",null,[(i(!0),o(T,null,D(C.value,(s,u,n)=>(i(),o("div",{key:u,class:"date-group"},[c("div",O,[c("div",R,[_.value[n-1]?(i(),o("button",{key:0,class:"nav-arrow nav-left",onClick:r=>k(_.value[n-1])}," < ",8,U)):(i(),o("div",W)),c("h2",{class:"head-date",id:u},d(u),9,X),_.value[n+1]?(i(),o("button",{key:2,class:"nav-arrow nav-right",onClick:r=>k(_.value[n+1])}," > ",8,Y)):(i(),o("div",Z))])]),(i(!0),o(T,null,D(s,(r,g)=>(i(),o("div",{key:g,class:"time-group"},[c("h3",ee,d(g),1),c("ul",null,[(i(!0),o(T,null,D(r,a=>{var m;return i(),o("li",{key:a.id,class:"list-item-obj"},[I(l,{to:"/event/"+(((m=a["id-name"])==null?void 0:m.trim())||a.id),class:"list-item-link"},{default:E(()=>[c("div",te,[c("strong",se,[a.name?(i(),o("div",ae,[K(d(a.name)+" ",1),a.actsIDArr.length?(i(),o("span",ne," ("+d(w(a.actsIDArr))+") ",1)):P("",!0)])):a.actsIDArr.length?(i(),o("div",oe,d(w(a.actsIDArr)),1)):(i(),o("div",ie,d(e.$t("Unknown")),1))]),c("span",le,[c("span",null,d(M(a.stageID)),1),c("span",null,d(f(h)(a.start_time,"Date Long"))+", "+d(f(h)(a.start_time,"Time"))+" â€“ "+d(f(h)(a.end_time,"Time")),1),c("span",null,[I(J,{name:f(q)(a.type),class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),I(H,{itemId:a.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])}}}),me=x(re,[["__scopeId","data-v-a5f4e921"]]);export{me as S};
