import{u as S}from"./useEventData-YKV4L-9f.js";import{d as k,b as D,c as r,a as c,t as u,n as p,F as v,g as f,u as C,i as L,l as B,m as E,o as n,_ as w,f as $}from"./index-CKDUyt5k.js";const V={class:"table-content"},N={class:"timeline"},O={class:"timeline-column"},U={class:"timeline-header"},z={class:"stages"},F={class:"timeline-header"},j={key:0},q={key:1},P={key:2},G=k({__name:"TimeTableItem",props:{date:String},setup(y){const m=y,{performances:d,acts:g,stages:h}=S(),_=(t=[])=>t.map(a=>{var o;return((o=g.value.find(s=>s.id===a))==null?void 0:o.name)||"Unknown Artist"}).join(", "),H=D(()=>d.value.filter(t=>new Date(t.start_time).toLocaleDateString()===m.date).sort((t,a)=>new Date(t.start_time).getTime()-new Date(a.start_time).getTime())),i=D(()=>{const t=H.value.flatMap(l=>[new Date(l.start_time).getHours(),new Date(l.end_time).getHours()]),a=8,o=t.map(l=>l<a?l+24:l),s=Math.min(...o)-1,e=Math.max(...o)+1;return Array.from({length:e-s+1},(l,T)=>(s+T)%24)}),I=t=>{const a=new Date(t.start_time),o=new Date(t.end_time),s=i.value[0],e=i.value.length*60,l=(a.getHours()<s?a.getHours()+24:a.getHours())*60+a.getMinutes()-s*60,T=(o.getHours()<s?o.getHours()+24:o.getHours())*60+o.getMinutes()-s*60,A=l/e*100+"%",x=(T-l)/e*100+"%";return{top:A,height:x}},b=()=>{const t=i.value[0];return{height:`${((i.value[i.value.length-1]<t?i.value[i.value.length-1]+24:i.value[i.value.length-1])-t+1)*60}px`}},M=t=>{const a=i.value[0],o=i.value.length*60;return{top:((t<a?t+24:t)*60-a*60)/o*100+"%"}};return(t,a)=>{const o=E("router-link");return n(),r("div",V,[c("div",N,[c("div",O,[c("div",U,u(t.$t("Time")),1),c("div",{class:"time-slots",style:p(b())},[(n(!0),r(v,null,f(i.value,s=>(n(),r("div",{key:s,class:"time-slot",style:p(M(s))},u(s%24)+":00 ",5))),128))],4)])]),c("div",z,[(n(!0),r(v,null,f(C(h),s=>(n(),r("div",{key:s.id,class:"stage"},[c("div",F,u(s.name),1),c("div",{class:"events",style:p(b())},[(n(!0),r(v,null,f(i.value,e=>(n(),r("div",{key:e,class:"time-slot",style:p(M(e))},null,4))),128)),(n(!0),r(v,null,f(H.value.filter(e=>e.stageID===s.id),e=>{var l;return n(),L(o,{key:e.id,to:"/event/"+(((l=e["id-name"])==null?void 0:l.trim())||e.id),class:"event",style:p(I(e)),title:e.name||_(e.actsIDArr)||t.$t("Unknown")},{default:B(()=>[c("strong",null,[e.name?(n(),r("div",j,u(e.name),1)):e.actsIDArr.length?(n(),r("div",q,u(_(e.actsIDArr)),1)):(n(),r("div",P,u(t.$t("Unknown")),1))])]),_:2},1032,["to","style","title"])}),128))],4)]))),128))])])}}}),J=w(G,[["__scopeId","data-v-53b9ef0c"]]),K={class:"timetable"},Q={class:"day-head"},R=k({__name:"TimeTableList",setup(y){const{performances:m}=S(),d=D(()=>{const g=new Set(m.value.map(h=>new Date(h.start_time).toLocaleDateString()));return Array.from(g).sort()});return(g,h)=>(n(),r("div",K,[(n(!0),r(v,null,f(d.value,_=>(n(),r("div",{key:_,class:"day-table"},[c("h2",Q,u(_),1),$(J,{date:_},null,8,["date"])]))),128))]))}}),W=w(R,[["__scopeId","data-v-55c7d8f9"]]),X=k({__name:"TimeTableView",setup(y){return(m,d)=>(n(),r(v,null,[c("button",{onClick:d[0]||(d[0]=g=>m.$router.push("/schedule")),class:"btn-view-chang"},u(m.$t("change-view")),1),$(W)],64))}}),tt=w(X,[["__scopeId","data-v-c69afbcf"]]);export{tt as default};
