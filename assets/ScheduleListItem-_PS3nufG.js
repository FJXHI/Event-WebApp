import{d as $,c as y,f as h,a as o,F as T,C as D,b as c,t as d,g as I,D as E,H as j,p as z,o as i,J as K,z as P,G as Q,u as f,L as q,_ as x}from"./index-BdlLSpyO.js";import{u as G}from"./useEventData-DS76df0J.js";import{F as H,T as J}from"./TagLabel-3Kw3Vu_T.js";const O={class:"group-head"},R={class:"date-nav-container"},U=["onClick"],W={key:1,class:"nav-arrow nav-left"},X=["id"],Y=["onClick"],Z={key:3,class:"nav-arrow nav-right"},tt={class:"group-head head-time pad"},et={class:"list-item-ul"},st={class:"list-item-info pad"},at={class:"list-item-name"},nt={key:0},ot={key:0},it={key:1},lt={key:2},rt={class:"list-item-tags"},ct=$({__name:"ScheduleListItem",props:{filters:{}},setup(b){const N=z(),_=y(()=>Object.keys(C.value).sort());function k(t){N.replace({hash:`#${t}`});const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}const{performances:S,acts:v,stages:p}=G(),B=b,M=t=>{const e=p.value.find(l=>l.id===t);return e?e.name:"Stage not found"},w=t=>Q(t,v),V=y(()=>{const t=B.filters;return S.value.filter(e=>{var l;if(t.stages.length&&!t.stages.includes(String(e.stageID)))return!1;if(t.stageTypes.length){const s=p.value.find(u=>u.id===e.stageID);if(!s||!t.stageTypes.includes(s.type))return!1}if(t.perforTypes.length&&!t.perforTypes.includes(e.type)||t.performanceTags.length&&(!e.tags||!e.tags.some(s=>t.performanceTags.includes(s)))||t.categories.length&&!e.actsIDArr.map(n=>v.value.find(r=>r.id===n)).filter(Boolean).flatMap(n=>n.tags.map(r=>r.name)).some(n=>t.categories.includes(n))||t.actTypes.length&&!e.actsIDArr.some(u=>{const n=v.value.find(g=>g.id===u);return((n==null?void 0:n["act-type"])||[]).some(g=>t.actTypes.includes(g))})||t.actIDs.length&&!t.actIDs.some(s=>e.actsIDArr.includes(Number(s)))||t.performanceIDs.length&&!t.performanceIDs.some(s=>e.id===Number(s)))return!1;if(t.searchQuery){const s=t.searchQuery.toLowerCase(),u=(e.name||"").toLowerCase().includes(s)||(e.description||"").toLowerCase().includes(s),n=e.actsIDArr.some(a=>{var L,A;const m=v.value.find(F=>F.id===a);return((L=m==null?void 0:m.name)==null?void 0:L.toLowerCase().includes(s))||((A=m==null?void 0:m.description)==null?void 0:A.toLowerCase().includes(s))}),r=p.value.find(a=>a.id===e.stageID),g=(l=r==null?void 0:r.name)==null?void 0:l.toLowerCase().includes(s);if(!u&&!n&&!g)return!1}return!0}).sort((e,l)=>new Date(e.start_time).getTime()-new Date(l.start_time).getTime())}),C=y(()=>{const t={};for(const e of V.value){const l=h(e.start_time,"Date Long"),s=h(e.start_time,"Time");t[l]||(t[l]={}),t[l][s]||(t[l][s]=[]),t[l][s].push(e)}return t});return(t,e)=>{const l=j("router-link");return i(),o("div",null,[(i(!0),o(T,null,D(C.value,(s,u,n)=>(i(),o("div",{key:u,class:"date-group"},[c("div",O,[c("div",R,[_.value[n-1]?(i(),o("button",{key:0,class:"nav-arrow nav-left",onClick:r=>k(_.value[n-1])}," < ",8,U)):(i(),o("div",W)),c("h2",{class:"head-date",id:u},d(u),9,X),_.value[n+1]?(i(),o("button",{key:2,class:"nav-arrow nav-right",onClick:r=>k(_.value[n+1])}," > ",8,Y)):(i(),o("div",Z))])]),(i(!0),o(T,null,D(s,(r,g)=>(i(),o("div",{key:g,class:"time-group"},[c("h3",tt,d(g),1),c("ul",et,[(i(!0),o(T,null,D(r,a=>{var m;return i(),o("li",{key:a.id,class:"list-item-obj"},[I(l,{to:"/event/"+(((m=a["id-name"])==null?void 0:m.trim())||a.id),class:"list-item-link"},{default:E(()=>[c("div",st,[c("strong",at,[a.name?(i(),o("div",nt,[K(d(a.name)+" ",1),a.actsIDArr.length?(i(),o("span",ot," ("+d(w(a.actsIDArr))+") ",1)):P("",!0)])):a.actsIDArr.length?(i(),o("div",it,d(w(a.actsIDArr)),1)):(i(),o("div",lt,d(t.$t("Unknown")),1))]),c("span",rt,[c("span",null,d(M(a.stageID)),1),c("span",null,d(f(h)(a.start_time,"Date Long"))+", "+d(f(h)(a.start_time,"Time"))+" â€“ "+d(f(h)(a.end_time,"Time")),1),c("span",null,[I(J,{name:f(q)(a.type),class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),I(H,{itemId:a.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])}}}),gt=x(ct,[["__scopeId","data-v-07e28089"]]);export{gt as S};
