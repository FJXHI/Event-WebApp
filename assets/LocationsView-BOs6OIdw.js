import{d as T,c as n,q as C,r as g,a as u,b as o,x as B,w as I,z as D,y as $,g as m,t as F,F as q,C as x,D as O,H as V,o as l}from"./index-CgGtcfgA.js";import{u as E}from"./useEventData-DqMuNhgP.js";import{T as A,F as J}from"./TagLabel-RJyIkBT7.js";import{S as M,F as j}from"./SearchBar-GLeuilZ9.js";import{N as z}from"./NoEntries-CekVJF03.js";const H={class:"scroll-head full-height"},Q={class:"app-head"},R={class:"btn-header"},G={class:"scroll-y-area"},K={key:0,class:"list-item-ul"},P={class:"list-item-info pad"},U={class:"list-item-name"},W={class:"list-item-tags"},X=T({__name:"LocationList",props:{filterID:{}},setup(S){const c=C(),v=n(()=>c.query.fav==="true"),f=n(()=>c.query.search??"false"),a=g(""),p=n(()=>{const e=localStorage.getItem("stage");return e?JSON.parse(e).map(t=>parseInt(t)):[]}),b=n(()=>p.value.length>0),L=e=>{a.value=e.toLowerCase().trim()},h=g(!1),{stages:y}=E(),i=S,d=g({stageTypes:[]}),N=e=>{d.value.stageTypes=e.stageTypes||[]},k=n(()=>{if(!y.value||y.value.length===0)return[];if(i.filterID&&i.filterID.length===0)return[];let e=y.value;return i.filterID&&i.filterID.length>0&&(e=e.filter(t=>i.filterID.includes(t.id))),d.value.stageTypes.length>0&&(e=e.filter(t=>t.type&&d.value.stageTypes.includes(t.type))),a.value&&(e=e.filter(t=>{var r,w;const _=((r=t.name)==null?void 0:r.toLowerCase())||"",s=((w=t.description)==null?void 0:w.toLowerCase())||"";return _.includes(a.value)||s.includes(a.value)})),e});return(e,t)=>{const _=V("router-link");return l(),u("div",H,[o("div",Q,[B(m(M,{onApply:L},null,512),[[$,f.value==="true"]]),h.value?(l(),I(j,{key:0,showStageTypeFilter:!0,"initial-stage-types":d.value.stageTypes,onApply:N,onClose:t[0]||(t[0]=s=>h.value=!1)},null,8,["initial-stage-types"])):D("",!0)]),o("div",R,[o("button",{onClick:t[1]||(t[1]=s=>h.value=!0),class:"btn full"},F(e.$t("open-filter")),1)]),o("div",G,[k.value.length>0?(l(),u("ul",K,[(l(!0),u(q,null,x(k.value,s=>{var r;return l(),u("li",{key:s.id,class:"list-item-obj"},[m(_,{to:"/location/"+((r=s["id-name"])!=null&&r.trim()?s["id-name"]:s.id),class:"list-item-link"},{default:O(()=>[o("div",P,[o("strong",U,F(s.name),1),o("span",W,[s.type?(l(),I(A,{key:0,name:s.type,class:"tag-label-item TagLabel"},null,8,["name"])):D("",!0)])])]),_:2},1032,["to"]),m(J,{itemId:String(s.id),itemType:"stage",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])):(l(),I(z,{key:1,type:v.value&&!b.value?"favorites":"locations"},null,8,["type"]))])])}}}),Y={class:"list-view full-height"},le=T({__name:"LocationsView",setup(S){const c=C(),v=n(()=>c.query.fav==="true"),f=n(()=>{const a=localStorage.getItem("stage");return a?JSON.parse(a).map(p=>parseInt(p)):[]});return(a,p)=>(l(),u("div",Y,[m(X,{filterID:v.value?f.value:void 0,class:"full-height"},null,8,["filterID"])]))}});export{le as default};
