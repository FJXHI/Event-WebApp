import{u as S,f as m,g as w}from"./useEventData-emzBeDna.js";import{F as C}from"./FavBtn-Dex-ilpC.js";import{T as B}from"./tagLabel-BsM9IHfm.js";import{d as x,b as y,c as n,F as h,h as f,a as c,t as r,e as p,s as F,j as V,q as M,u as v,x as j,o as i,_ as q}from"./index-D8q-9Edq.js";const E={class:"group-head head-date"},K={class:"group-head head-time pad"},P={class:"list-item-info pad"},Q={class:"list-item-name"},U={key:0},$={key:0},z={key:1},G={key:2},H={class:"list-item-tags"},J=x({__name:"ScheduleListItem",props:{filters:{}},setup(I){const{performances:T,acts:_,stages:k}=S(),A=I,L=t=>{const s=k.value.find(e=>e.id===t);return s?s.name:"Stage not found"},D=t=>w(t,_),N=y(()=>{const t=A.filters;return T.value.filter(s=>{if(t.stages.length&&!t.stages.includes(String(s.stageID))||t.types.length&&!t.types.includes(s.type)||t.performanceTags.length&&(!s.tags||!s.tags.some(e=>t.performanceTags.includes(e)))||t.categories.length&&!s.actsIDArr.map(o=>_.value.find(l=>l.id===o)).filter(Boolean).flatMap(o=>o.tags.filter(l=>l.visible).map(l=>l.name)).some(o=>t.categories.includes(o))||t.actIDs.length&&!t.actIDs.some(e=>s.actsIDArr.includes(Number(e)))||t.performanceIDs.length&&!t.performanceIDs.some(e=>s.id===Number(e)))return!1;if(t.searchQuery){const e=t.searchQuery.toLowerCase(),u=(s.description||"").toLowerCase().includes(e),o=s.actsIDArr.some(l=>{var a;const d=_.value.find(g=>g.id===l);return(a=d==null?void 0:d.description)==null?void 0:a.toLowerCase().includes(e)});if(!u&&!o)return!1}return!0}).sort((s,e)=>new Date(s.start_time).getTime()-new Date(e.start_time).getTime())}),b=y(()=>{const t={};for(const s of N.value){const e=m(s.start_time,"Date Long"),u=m(s.start_time,"Time");t[e]||(t[e]={}),t[e][u]||(t[e][u]=[]),t[e][u].push(s)}return t});return(t,s)=>{const e=j("router-link");return i(),n("div",null,[(i(!0),n(h,null,f(b.value,(u,o)=>(i(),n("div",{key:o,class:"date-group"},[c("h2",E,r(o),1),(i(!0),n(h,null,f(u,(l,d)=>(i(),n("div",{key:d,class:"time-group"},[c("h3",K,r(d),1),c("ul",null,[(i(!0),n(h,null,f(l,a=>{var g;return i(),n("li",{key:a.id,class:"list-item-obj"},[p(e,{to:"/event/"+(((g=a["id-name"])==null?void 0:g.trim())||a.id),class:"list-item-link"},{default:F(()=>[c("div",P,[c("strong",Q,[a.name?(i(),n("div",U,[V(r(a.name)+" ",1),a.actsIDArr.length?(i(),n("span",$," ("+r(D(a.actsIDArr))+") ",1)):M("",!0)])):a.actsIDArr.length?(i(),n("div",z,r(D(a.actsIDArr)),1)):(i(),n("div",G,r(t.$t("Unknown")),1))]),c("span",H,[c("span",null,r(L(a.stageID)),1),c("span",null,r(v(m)(a.start_time,"Date Long"))+", "+r(v(m)(a.start_time,"Time"))+" â€“ "+r(v(m)(a.end_time,"Time")),1),c("span",null,[p(B,{name:a.type,class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),p(C,{itemId:a.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])}}}),Y=q(J,[["__scopeId","data-v-f8331fdd"]]);export{Y as S};
