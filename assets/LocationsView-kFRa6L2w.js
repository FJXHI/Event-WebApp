import{d as C,c as m,q as D,r as g,a as l,b as n,w as L,y as I,z as T,x as $,g as d,t as p,F as B,C as N,D as V,H as q,o as a,u as x}from"./index-BdlLSpyO.js";import{u as F}from"./useEventData-DS76df0J.js";import{F as A,T as E}from"./TagLabel-3Kw3Vu_T.js";import{S as M,F as O}from"./SearchBar-BfzMeHYY.js";const j={class:"locations-list"},z={class:"app-head"},H={class:"btn-header"},J={class:"scroll-area"},Q={key:0,class:"list-item-ul"},R={class:"list-item-info pad"},G={class:"list-item-name"},K={class:"list-item-tags"},P={key:1},U=C({__name:"LocationList",props:{filterID:{}},setup(k){const v=D(),f=m(()=>v.query.search??"false"),i=g(""),_=e=>{i.value=e.toLowerCase().trim()},o=g(!1),{stages:r}=F(),y=k,u=g({stageTypes:[]}),b=e=>{u.value.stageTypes=e.stageTypes||[]},w=m(()=>{if(!r.value||r.value.length===0)return[];let e=r.value;return y.filterID&&y.filterID.length>0&&(e=e.filter(t=>y.filterID.includes(t.id))),u.value.stageTypes.length>0&&(e=e.filter(t=>t.type&&u.value.stageTypes.includes(t.type))),i.value&&(e=e.filter(t=>{var c,S;const h=((c=t.name)==null?void 0:c.toLowerCase())||"",s=((S=t.description)==null?void 0:S.toLowerCase())||"";return h.includes(i.value)||s.includes(i.value)})),e});return(e,t)=>{const h=q("router-link");return a(),l("div",j,[n("div",z,[L(d(M,{onApply:_},null,512),[[$,f.value==="true"]]),o.value?(a(),I(O,{key:0,showStageTypeFilter:!0,"initial-stage-types":u.value.stageTypes,onApply:b,onClose:t[0]||(t[0]=s=>o.value=!1)},null,8,["initial-stage-types"])):T("",!0)]),n("div",H,[n("button",{onClick:t[1]||(t[1]=s=>o.value=!0),class:"btn full"},p(e.$t("open-filter")),1)]),n("div",J,[w.value.length>0?(a(),l("ul",Q,[(a(!0),l(B,null,N(w.value,s=>{var c;return a(),l("li",{key:s.id,class:"list-item-obj"},[d(h,{to:"/location/"+((c=s["id-name"])!=null&&c.trim()?s["id-name"]:s.id),class:"list-item-link"},{default:V(()=>[n("div",R,[n("strong",G,p(s.name),1),n("span",K,[s.type?(a(),I(E,{key:0,name:s.type,class:"tag-label-item TagLabel"},null,8,["name"])):T("",!0)])])]),_:2},1032,["to"]),d(A,{itemId:String(s.id),itemType:"stage",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])):(a(),l("p",P,p(e.$t("no-locations")),1))])])}}}),W={class:"list-view"},X={key:0},Y={key:1},ae=C({__name:"LocationsView",setup(k){const{stages:v}=F(),f=D(),i=m(()=>f.query.fav==="true"),_=m(()=>{const o=localStorage.getItem("stage");return o?JSON.parse(o).map(r=>parseInt(r)):[]});return(o,r)=>(a(),l("div",W,[x(v).length>0?(a(),l("div",X,[d(U,{filterID:i.value?_.value:void 0},null,8,["filterID"])])):(a(),l("p",Y,p(o.$t("no-locations")),1))]))}});export{ae as default};
