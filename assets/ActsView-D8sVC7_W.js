import{d as S,c as d,q as $,r as f,a as o,w as O,y as C,z as V,b as r,x as Q,g as _,t as v,F as T,C as w,D as x,H as E,o as l,_ as M,u as j}from"./index-C__xxzqB.js";import{u as L}from"./useEventData-jweThlje.js";import{F as z,T as H}from"./TagLabel-CiNlt0xw.js";import{S as J,F as R}from"./SearchBar-QIW37Vyk.js";const G={class:"act-list"},K={class:"btn-header"},P={class:"list-scroll-area"},U={key:0,class:"list-item-ul app-body"},W={class:"list-item-info pad"},X={class:"list-item-name"},Y={class:"list-item-tags"},Z={key:1},ee=S({__name:"ActList",props:{filterID:{}},setup(b){const h=$(),y=d(()=>h.query.search??"false"),c=f(""),g=e=>{c.value=e.toLowerCase().trim()},n=f(!1),{acts:u}=L(),I=b,s=f({categories:[],actTypes:[],searchQuery:"",actIDs:[]}),A=e=>{s.value.categories=e.categories||[],s.value.actTypes=e.actTypes||[],s.value.actIDs=e.actIDs||[],c.value=s.value.searchQuery},F=d(()=>{if(!u.value||u.value.length===0)return[];let e=u.value;if(I.filterID&&I.filterID.length>0&&(e=e.filter(t=>I.filterID.includes(t.id))),s.value.actIDs&&s.value.actIDs.length>0&&(e=e.filter(t=>s.value.actIDs.includes(t.id))),s.value.categories&&s.value.categories.length>0&&(e=e.filter(t=>{var i;return(i=t.tags)==null?void 0:i.some(a=>s.value.categories.includes(a.name))})),s.value.actTypes&&s.value.actTypes.length>0&&(e=e.filter(t=>(t["act-type"]||[]).some(a=>s.value.actTypes.includes(a)))),c.value&&(!s.value.actIDs||s.value.actIDs.length===0)){const t=c.value.toLowerCase();e=e.filter(i=>{var a,p;return((a=i.name)==null?void 0:a.toLowerCase().includes(t))||((p=i.description)==null?void 0:p.toLowerCase().includes(t))})}return e}),m=f("name"),B=()=>{m.value=m.value==="name"?"id":"name"},q=d(()=>m.value==="name"?"id":"name"),k=d(()=>[...F.value].sort((e,t)=>m.value==="name"?e.name.localeCompare(t.name,"de",{sensitivity:"base"}):e.id-t.id));return(e,t)=>{const i=E("router-link");return l(),o("div",G,[O(_(J,{onApply:g},null,512),[[Q,y.value==="true"]]),n.value?(l(),C(R,{key:0,showCategoryFilter:!0,showActTypeFilter:!0,"initial-categories":s.value.categories,"initial-act-types":s.value.actTypes,onApply:A,onClose:t[0]||(t[0]=a=>n.value=!1)},null,8,["initial-categories","initial-act-types"])):V("",!0),r("div",K,[r("button",{class:"schedul-btn btn-view-chang",onClick:B},v(e.$t("sort-by"))+": "+v(e.$t(q.value)),1),r("button",{onClick:t[1]||(t[1]=a=>n.value=!0),class:"open-filter schedul-btn"},v(e.$t("open-filter")),1)]),r("div",P,[k.value.length>0?(l(),o("ul",U,[(l(!0),o(T,null,w(k.value,a=>{var p;return l(),o("li",{key:a.id,class:"list-item-obj"},[_(i,{to:"/act/"+((p=a["id-name"])!=null&&p.trim()?a["id-name"]:a.id),class:"list-item-link"},{default:x(()=>[r("div",W,[r("strong",X,v(a.name),1),r("span",Y,[(l(!0),o(T,null,w(a.tags.filter(D=>D.visible),(D,N)=>(l(),C(H,{key:N,name:D.name,class:"tag-label-item TagLabel"},null,8,["name"]))),128))])])]),_:2},1032,["to"]),_(z,{itemId:String(a.id),itemType:"act",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])):(l(),o("p",Z,v(e.$t("no-acts")),1))])])}}}),te=M(ee,[["__scopeId","data-v-8b5e1804"]]),se={class:"list-view"},ae={key:0},le={key:1},ce=S({__name:"ActsView",setup(b){const{acts:h}=L(),y=$(),c=d(()=>y.query.fav==="true"),g=d(()=>{const n=localStorage.getItem("act");return n?JSON.parse(n).map(u=>parseInt(u)):[]});return(n,u)=>(l(),o("div",se,[j(h).length>0?(l(),o("div",ae,[_(te,{filterID:c.value?g.value:void 0},null,8,["filterID"])])):(l(),o("p",le,v(n.$t("no-acts")),1))]))}});export{ce as default};
