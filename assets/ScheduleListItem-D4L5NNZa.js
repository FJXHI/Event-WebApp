import{d as S,a as o,b as c,t as u,u as p,f,o as n,_ as B,L as z,c as k,w as K,z as $,F as L,C as w,g as y,D as P,H as Q,p as q,J as G,G as J,M as R}from"./index-DvEHhzx9.js";import{u as U}from"./useEventData-B5qklJXF.js";import{F as W,T as X}from"./TagLabel-CigBHrBg.js";import{N as Y}from"./NoEntries-qNzWZaHb.js";const Z={class:"group-head"},x={class:"date-nav-container"},ee={key:1,class:"nav-arrow nav-left"},te=["id"],se={key:3,class:"nav-arrow nav-right"},ae=S({__name:"DateHead",props:{date:{},index:{},sortedDateList:{},scrollToDate:{type:Function}},setup(C){return(i,_)=>(n(),o("div",Z,[c("div",x,[i.sortedDateList[i.index-1]?(n(),o("button",{key:0,class:"nav-arrow nav-left",onClick:_[0]||(_[0]=D=>i.scrollToDate(i.sortedDateList[i.index-1]))}," < ")):(n(),o("div",ee)),c("h2",{class:"head-date",id:i.date},u(p(f)(i.date,"Date Long")),9,te),i.sortedDateList[i.index+1]?(n(),o("button",{key:2,class:"nav-arrow nav-right",onClick:_[1]||(_[1]=D=>i.scrollToDate(i.sortedDateList[i.index+1]))}," > ")):(n(),o("div",se))])]))}}),ne=B(ae,[["__scopeId","data-v-97f52d27"]]),oe={class:"scroll-head full-height"},ie={class:"scroll-y-area"},re={class:"group-head head-time pad"},le={class:"list-item-ul"},ce={class:"list-item-info pad"},de={class:"list-item-name"},ue={key:0},me={key:0},ge={key:1},he={key:2},_e={class:"list-item-tags"},fe=S({__name:"ScheduleListItem",props:{filters:{}},setup(C){const{t:i}=z(),_=q(),D=k(()=>Object.keys(I.value).sort());function F(e){_.replace({hash:`#${e}`});const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}const{performances:M,acts:v,stages:T}=U(),V=C,E=e=>{const t=T.value.find(l=>l.id===e);return t?t.name:i("stageNotFound")},b=(e=[])=>J(e,v),j=k(()=>{const e=V.filters;return M.value.filter(t=>{var l;if(e.stages.length&&!e.stages.includes(String(t.stageID)))return!1;if(e.stageTypes.length){const s=T.value.find(m=>m.id===t.stageID);if(!s||!e.stageTypes.includes(s.type))return!1}if(e.perforTypes.length&&!e.perforTypes.includes(t.type)||e.performanceTags.length&&(!t.tags||!t.tags.some(s=>e.performanceTags.includes(s)))||e.categories.length&&!t.actsIDArr.map(r=>v.value.find(d=>d.id===r)).filter(Boolean).flatMap(r=>r.tags.map(d=>d.name)).some(r=>e.categories.includes(r))||e.actTypes.length&&!t.actsIDArr.some(m=>{const r=v.value.find(h=>h.id===m);return((r==null?void 0:r["act-type"])||[]).some(h=>e.actTypes.includes(h))})||e.actIDs.length&&!e.actIDs.some(s=>t.actsIDArr.includes(Number(s)))||e.performanceIDs.length&&!e.performanceIDs.some(s=>t.id===Number(s)))return!1;if(e.searchQuery){const s=e.searchQuery.toLowerCase(),m=(t.name||"").toLowerCase().includes(s)||(t.description||"").toLowerCase().includes(s),r=t.actsIDArr.some(a=>{var A,N;const g=v.value.find(O=>O.id===a);return((A=g==null?void 0:g.name)==null?void 0:A.toLowerCase().includes(s))||((N=g==null?void 0:g.description)==null?void 0:N.toLowerCase().includes(s))}),d=T.value.find(a=>a.id===t.stageID),h=(l=d==null?void 0:d.name)==null?void 0:l.toLowerCase().includes(s);if(!m&&!r&&!h)return!1}return!0}).sort(H)});function H(e,t){return new Date(e.start_time).getTime()-new Date(t.start_time).getTime()}const I=k(()=>{const e={};for(const t of j.value){const l=f(t.start_time,"ISO"),s=f(t.start_time,"Time");e[l]||(e[l]={}),e[l][s]||(e[l][s]=[]),e[l][s].push(t)}return e});return(e,t)=>{const l=Q("router-link");return n(),o("div",oe,[c("div",ie,[Object.keys(I.value).length===0?(n(),K(Y,{key:0,type:"event"})):$("",!0),(n(!0),o(L,null,w(I.value,(s,m,r)=>(n(),o("div",{key:m,class:"date-group"},[y(ne,{date:m,index:r,sortedDateList:D.value,scrollToDate:F},null,8,["date","index","sortedDateList"]),(n(!0),o(L,null,w(s,(d,h)=>(n(),o("div",{key:h,class:"time-group"},[c("h3",re,u(h),1),c("ul",le,[(n(!0),o(L,null,w(d,a=>{var g;return n(),o("li",{key:a.id,class:"list-item-obj"},[y(l,{to:`/event/${((g=a["id-name"])==null?void 0:g.trim())||a.id}`,class:"list-item-link"},{default:P(()=>[c("div",ce,[c("strong",de,[a.name?(n(),o("div",ue,[G(u(a.name)+" ",1),a.actsIDArr.length?(n(),o("span",me," ("+u(b(a.actsIDArr))+") ",1)):$("",!0)])):a.actsIDArr.length?(n(),o("div",ge,u(b(a.actsIDArr)),1)):(n(),o("div",he,u(e.$t("Unknown")),1))]),c("span",_e,[c("span",null,u(E(a.stageID)),1),c("span",null,u(p(f)(a.start_time,"Date Long"))+", "+u(p(f)(a.start_time,"Time"))+" â€“ "+u(p(f)(a.end_time,"Time")),1),c("span",null,[y(X,{name:p(R)(a.type),class:"tag-label-item"},null,8,["name"])])])])]),_:2},1032,["to"]),y(W,{itemId:a.id.toString(),itemType:"event",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])]))),128))]))),128))])])}}}),Te=B(fe,[["__scopeId","data-v-df8ef70c"]]);export{ne as D,Te as S};
