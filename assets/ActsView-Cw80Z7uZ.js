import{d as S,c as v,q as $,r as f,a as o,w as O,y as C,z as V,b as r,x as E,g,t as u,F as T,C as w,D as M,H as j,o as l,u as x}from"./index-BdlLSpyO.js";import{u as F}from"./useEventData-DS76df0J.js";import{F as z,T as H}from"./TagLabel-3Kw3Vu_T.js";import{S as J,F as Q}from"./SearchBar-BfzMeHYY.js";const R={class:"act-list"},G={class:"btn-header"},K={class:"list-scroll-old"},P={key:0,class:"list-item-ul"},U={class:"list-item-info pad"},W={class:"list-item-name"},X={class:"list-item-tags"},Y={key:1},Z=S({__name:"ActList",props:{filterID:{}},setup(k){const h=$(),y=v(()=>h.query.search??"false"),d=f(""),_=e=>{d.value=e.toLowerCase().trim()},i=f(!1),{acts:c}=F(),I=k,s=f({categories:[],actTypes:[],actIDs:[]}),L=e=>{s.value.categories=e.categories||[],s.value.actTypes=e.actTypes||[],s.value.actIDs=e.actIDs||[]},A=v(()=>{if(!c.value||c.value.length===0)return[];let e=c.value;if(I.filterID&&I.filterID.length>0&&(e=e.filter(t=>I.filterID.includes(t.id))),s.value.actIDs&&s.value.actIDs.length>0&&(e=e.filter(t=>s.value.actIDs.includes(t.id))),s.value.categories&&s.value.categories.length>0&&(e=e.filter(t=>{var n;return(n=t.tags)==null?void 0:n.some(a=>s.value.categories.includes(a.name))})),s.value.actTypes&&s.value.actTypes.length>0&&(e=e.filter(t=>(t["act-type"]||[]).some(a=>s.value.actTypes.includes(a)))),d.value&&(!s.value.actIDs||s.value.actIDs.length===0)){const t=d.value.toLowerCase();e=e.filter(n=>{var a,m;return((a=n.name)==null?void 0:a.toLowerCase().includes(t))||((m=n.description)==null?void 0:m.toLowerCase().includes(t))})}return e}),p=f("name"),B=()=>{p.value=p.value==="name"?"id":"name"},q=v(()=>p.value==="name"?"id":"name"),b=v(()=>[...A.value].sort((e,t)=>p.value==="name"?e.name.localeCompare(t.name,"de",{sensitivity:"base"}):e.id-t.id));return(e,t)=>{const n=j("router-link");return l(),o("div",R,[O(g(J,{onApply:_},null,512),[[E,y.value==="true"]]),i.value?(l(),C(Q,{key:0,showCategoryFilter:!0,showActTypeFilter:!0,"initial-categories":s.value.categories,"initial-act-types":s.value.actTypes,onApply:L,onClose:t[0]||(t[0]=a=>i.value=!1)},null,8,["initial-categories","initial-act-types"])):V("",!0),r("div",G,[r("button",{class:"btn half left",onClick:B},u(e.$t("sort-by"))+": "+u(e.$t(q.value)),1),r("button",{onClick:t[1]||(t[1]=a=>i.value=!0),class:"btn right"},u(e.$t("open-filter")),1)]),r("div",K,[b.value.length>0?(l(),o("ul",P,[(l(!0),o(T,null,w(b.value,a=>{var m;return l(),o("li",{key:a.id,class:"list-item-obj"},[g(n,{to:"/act/"+((m=a["id-name"])!=null&&m.trim()?a["id-name"]:a.id),class:"list-item-link"},{default:M(()=>[r("div",U,[r("strong",W,u(a.name),1),r("span",X,[(l(!0),o(T,null,w(a.tags.filter(D=>D.visible),(D,N)=>(l(),C(H,{key:N,name:D.name,class:"tag-label-item TagLabel"},null,8,["name"]))),128))])])]),_:2},1032,["to"]),g(z,{itemId:String(a.id),itemType:"act",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])):(l(),o("p",Y,u(e.$t("no-acts")),1))])])}}}),ee={class:"list-view"},te={key:0},se={key:1},ne=S({__name:"ActsView",setup(k){const{acts:h}=F(),y=$(),d=v(()=>y.query.fav==="true"),_=v(()=>{const i=localStorage.getItem("act");return i?JSON.parse(i).map(c=>parseInt(c)):[]});return(i,c)=>(l(),o("div",ee,[x(h).length>0?(l(),o("div",te,[g(Z,{filterID:d.value?_.value:void 0},null,8,["filterID"])])):(l(),o("p",se,u(i.$t("no-acts")),1))]))}});export{ne as default};
