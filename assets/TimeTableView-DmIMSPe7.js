import{u as S}from"./useEventData-BPobgVkY.js";import{d as H,b as D,c as i,a as u,t as v,n as f,F as g,g as h,u as C,f as w,l as I,w as L,k as E,o as l,_ as N}from"./index-CqKoZLBC.js";const V={class:"table-content"},B={class:"timeline"},O={class:"timeline-column"},z={class:"timeline-header"},F={class:"stages"},j={class:"timeline-header"},q=H({__name:"TimeTableItem",props:{date:String},setup(y){const m=y,{performances:c,acts:d,stages:p}=S(),_=(t=[])=>t.map(s=>{var n;return((n=d.value.find(e=>e.id===s))==null?void 0:n.name)||"Unknown Artist"}).join(", "),M=D(()=>c.value.filter(t=>new Date(t.start_time).toLocaleDateString()===m.date).sort((t,s)=>new Date(t.start_time).getTime()-new Date(s.start_time).getTime())),r=D(()=>{const t=M.value.flatMap(o=>[new Date(o.start_time).getHours(),new Date(o.end_time).getHours()]),s=8,n=t.map(o=>o<s?o+24:o),e=Math.min(...n)-1,a=Math.max(...n)+1;return Array.from({length:a-e+1},(o,T)=>(e+T)%24)}),x=t=>{const s=new Date(t.start_time),n=new Date(t.end_time),e=r.value[0],a=r.value.length*60,o=(s.getHours()<e?s.getHours()+24:s.getHours())*60+s.getMinutes()-e*60,T=(n.getHours()<e?n.getHours()+24:n.getHours())*60+n.getMinutes()-e*60,$=o/a*100+"%",A=(T-o)/a*100+"%";return{top:$,height:A}},k=()=>{const t=r.value[0];return{height:`${((r.value[r.value.length-1]<t?r.value[r.value.length-1]+24:r.value[r.value.length-1])-t)*60}px`}},b=t=>{const s=r.value[0],n=r.value.length*60;return{top:((t<s?t+24:t)*60-s*60)/n*100+"%"}};return(t,s)=>{const n=I("router-link");return l(),i("div",V,[u("div",B,[u("div",O,[u("div",z,v(t.$t("Time")),1),u("div",{class:"time-slots",style:f(k())},[(l(!0),i(g,null,h(r.value,e=>(l(),i("div",{key:e,class:"time-slot",style:f(b(e))},v(e%24)+":00 ",5))),128))],4)])]),u("div",F,[(l(!0),i(g,null,h(C(p),e=>(l(),i("div",{key:e.id,class:"stage"},[u("div",j,v(e.name),1),u("div",{class:"events",style:f(k())},[(l(!0),i(g,null,h(M.value.filter(a=>a.stageID===e.id),a=>{var o;return l(),i("div",{key:a.id,class:"event",style:f(x(a))},[w(n,{to:"/event/"+(((o=a["id-name"])==null?void 0:o.trim())||a.id)},{default:L(()=>[E(v(_(a.actsIDArr)),1)]),_:2},1032,["to"])],4)}),128))],4)]))),128))])])}}}),P=N(q,[["__scopeId","data-v-7d0c306f"]]),U={class:"timetable"},G=H({__name:"TimeTableList",setup(y){const{performances:m}=S(),c=D(()=>{const d=new Set(m.value.map(p=>new Date(p.start_time).toLocaleDateString()));return Array.from(d).sort()});return(d,p)=>(l(),i("div",U,[(l(!0),i(g,null,h(c.value,_=>(l(),i("div",{key:_,class:"day-table"},[u("h2",null,v(_),1),w(P,{date:_},null,8,["date"])]))),128))]))}}),Q=H({__name:"TimeTableView",setup(y){return(m,c)=>(l(),i(g,null,[u("button",{onClick:c[0]||(c[0]=d=>m.$router.push("/schedule"))},"List"),w(G)],64))}});export{Q as default};
