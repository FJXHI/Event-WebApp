import{d as L,c as n,q as A,r as g,a as c,x as V,w as h,z as x,b as o,y as M,g as _,t as y,F as w,E as S,G as j,K as z,o as l}from"./index-D9Re5mF_.js";import{u as $}from"./useEventData-mVwqMhg8.js";import{T as G,F as J}from"./TagLabel-EjRzqVNS.js";import{S as K,F as Q}from"./SearchBar-DQTfBN_P.js";import{N as F}from"./NoEntries-qmPgtxmh.js";const R={class:"scroll-head full-height"},H={class:"btn-header"},P={class:"scroll-y-area"},U={key:0,class:"list-item-ul"},W={class:"list-item-info pad"},X={class:"list-item-name"},Y={class:"list-item-tags"},Z=L({__name:"ActList",props:{filterID:{}},setup(T){const m=A(),d=n(()=>m.query.fav==="true"),I=n(()=>m.query.search??"false"),r=g(""),p=e=>{r.value=e.toLowerCase().trim()},D=g(!1),{acts:b}=$(),u=T,s=g({categories:[],actTypes:[],actIDs:[]}),B=e=>{s.value.categories=e.categories||[],s.value.actTypes=e.actTypes||[],s.value.actIDs=e.actIDs||[]},N=n(()=>{if(!b.value||b.value.length===0)return[];if(d.value&&(!u.filterID||u.filterID.length===0))return[];let e=b.value;if(u.filterID&&u.filterID.length>0&&(e=e.filter(t=>u.filterID.includes(t.id))),s.value.actIDs&&s.value.actIDs.length>0&&(e=e.filter(t=>s.value.actIDs.includes(t.id))),s.value.categories&&s.value.categories.length>0&&(e=e.filter(t=>{var i;return(i=t.tags)==null?void 0:i.some(a=>s.value.categories.includes(a.name))})),s.value.actTypes&&s.value.actTypes.length>0&&(e=e.filter(t=>(t["act-type"]||[]).some(a=>s.value.actTypes.includes(a)))),r.value&&(!s.value.actIDs||s.value.actIDs.length===0)){const t=r.value.toLowerCase();e=e.filter(i=>{var a,v;return((a=i.name)==null?void 0:a.toLowerCase().includes(t))||((v=i.description)==null?void 0:v.toLowerCase().includes(t))})}return e}),f=g("name"),q=()=>{f.value=f.value==="name"?"id":"name"},O=n(()=>f.value==="name"?"id":"name"),C=n(()=>[...N.value].sort((e,t)=>f.value==="name"?e.name.localeCompare(t.name,"de",{sensitivity:"base"}):e.id-t.id));return(e,t)=>{const i=z("router-link");return l(),c("div",R,[V(_(K,{onApply:p},null,512),[[M,I.value==="true"]]),D.value?(l(),h(Q,{key:0,showCategoryFilter:!0,showActTypeFilter:!0,"initial-categories":s.value.categories,"initial-act-types":s.value.actTypes,onApply:B,onClose:t[0]||(t[0]=a=>D.value=!1)},null,8,["initial-categories","initial-act-types"])):x("",!0),o("div",H,[o("button",{class:"btn half left",onClick:q},y(e.$t("sort-by"))+": "+y(e.$t(O.value)),1),o("button",{onClick:t[1]||(t[1]=a=>D.value=!0),class:"btn right"},y(e.$t("open-filter")),1)]),o("div",P,[C.value.length>0?(l(),c("ul",U,[(l(!0),c(w,null,S(C.value,a=>{var v;return l(),c("li",{key:a.id,class:"list-item-obj"},[_(i,{to:"/act/"+((v=a["id-name"])!=null&&v.trim()?a["id-name"]:a.id),class:"list-item-link"},{default:j(()=>[o("div",W,[o("strong",X,y(a.name),1),o("span",Y,[(l(!0),c(w,null,S(a.tags.filter(k=>k.visible),(k,E)=>(l(),h(G,{key:E,name:k.name,class:"tag-label-item TagLabel"},null,8,["name"]))),128))])])]),_:2},1032,["to"]),_(J,{itemId:String(a.id),itemType:"act",class:"list-item-fav-btn"},null,8,["itemId"])])}),128))])):d.value?(l(),h(F,{key:1,type:"favorites"})):(l(),h(F,{key:2,type:"acts"}))])])}}}),ee={class:"list-view full-height"},re=L({__name:"ActsView",setup(T){$();const m=A(),d=n(()=>m.query.fav==="true"),I=n(()=>{const r=localStorage.getItem("act");return r?JSON.parse(r).map(p=>parseInt(p)):[]});return(r,p)=>(l(),c("div",ee,[_(Z,{filterID:d.value?I.value:void 0,class:"full-height"},null,8,["filterID"])]))}});export{re as default};
